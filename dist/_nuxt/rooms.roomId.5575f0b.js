/*! For license information please see LICENSES */
(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{225:function(e,t,r){"use strict";var n=r(231),o=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t};e.exports=v;var c=Object.create(r(229));c.inherits=r(227);var f=r(243),d=r(236);c.inherits(v,f);for(var l=o(d.prototype),h=0;h<l.length;h++){var m=l[h];v.prototype[m]||(v.prototype[m]=d.prototype[m])}function v(e){if(!(this instanceof v))return new v(e);f.call(this,e),d.call(this,e),e&&!1===e.readable&&(this.readable=!1),e&&!1===e.writable&&(this.writable=!1),this.allowHalfOpen=!0,e&&!1===e.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",y)}function y(){this.allowHalfOpen||this._writableState.ended||n.nextTick(w,this)}function w(e){e.end()}Object.defineProperty(v.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(v.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}}),v.prototype._destroy=function(e,t){this.push(null),this.end(),n.nextTick(t,e)}},226:function(e,t,r){"use strict";(function(e){var n=r(256),o=r(257),c=r(241);function f(){return l.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function d(e,t){if(f()<t)throw new RangeError("Invalid typed array length");return l.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=l.prototype:(null===e&&(e=new l(t)),e.length=t),e}function l(e,t,r){if(!(l.TYPED_ARRAY_SUPPORT||this instanceof l))return new l(e,t,r);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return v(this,e)}return h(this,e,t,r)}function h(e,t,r,n){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,r,n){if(t.byteLength,r<0||t.byteLength<r)throw new RangeError("'offset' is out of bounds");if(t.byteLength<r+(n||0))throw new RangeError("'length' is out of bounds");t=void 0===r&&void 0===n?new Uint8Array(t):void 0===n?new Uint8Array(t,r):new Uint8Array(t,r,n);l.TYPED_ARRAY_SUPPORT?(e=t).__proto__=l.prototype:e=y(e,t);return e}(e,t,r,n):"string"==typeof t?function(e,t,r){"string"==typeof r&&""!==r||(r="utf8");if(!l.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var n=0|R(t,r),o=(e=d(e,n)).write(t,r);o!==n&&(e=e.slice(0,o));return e}(e,t,r):function(e,t){if(l.isBuffer(t)){var r=0|w(t.length);return 0===(e=d(e,r)).length||t.copy(e,0,0,r),e}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||(n=t.length)!=n?d(e,0):y(e,t);if("Buffer"===t.type&&c(t.data))return y(e,t.data)}var n;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function m(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function v(e,t){if(m(t),e=d(e,t<0?0:0|w(t)),!l.TYPED_ARRAY_SUPPORT)for(var i=0;i<t;++i)e[i]=0;return e}function y(e,t){var r=t.length<0?0:0|w(t.length);e=d(e,r);for(var i=0;i<r;i+=1)e[i]=255&t[i];return e}function w(e){if(e>=f())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+f().toString(16)+" bytes");return 0|e}function R(e,t){if(l.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var r=e.length;if(0===r)return 0;for(var n=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return $(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return J(e).length;default:if(n)return $(e).length;t=(""+t).toLowerCase(),n=!0}}function S(e,t,r){var n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return P(this,t,r);case"utf8":case"utf-8":return B(this,t,r);case"ascii":return U(this,t,r);case"latin1":case"binary":return D(this,t,r);case"base64":return O(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return j(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function k(b,e,t){var i=b[e];b[e]=b[t],b[t]=i}function _(e,t,r,n,o){if(0===e.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=o?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(o)return-1;r=e.length-1}else if(r<0){if(!o)return-1;r=0}if("string"==typeof t&&(t=l.from(t,n)),l.isBuffer(t))return 0===t.length?-1:T(e,t,r,n,o);if("number"==typeof t)return t&=255,l.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):T(e,[t],r,n,o);throw new TypeError("val must be string, number or Buffer")}function T(e,t,r,n,o){var i,c=1,f=e.length,d=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;c=2,f/=2,d/=2,r/=2}function l(e,i){return 1===c?e[i]:e.readUInt16BE(i*c)}if(o){var h=-1;for(i=r;i<f;i++)if(l(e,i)===l(t,-1===h?0:i-h)){if(-1===h&&(h=i),i-h+1===d)return h*c}else-1!==h&&(i-=i-h),h=-1}else for(r+d>f&&(r=f-d),i=r;i>=0;i--){for(var m=!0,v=0;v<d;v++)if(l(e,i+v)!==l(t,v)){m=!1;break}if(m)return i}return-1}function C(e,t,r,n){r=Number(r)||0;var o=e.length-r;n?(n=Number(n))>o&&(n=o):n=o;var c=t.length;if(c%2!=0)throw new TypeError("Invalid hex string");n>c/2&&(n=c/2);for(var i=0;i<n;++i){var f=parseInt(t.substr(2*i,2),16);if(isNaN(f))return i;e[r+i]=f}return i}function E(e,t,r,n){return K($(t,e.length-r),e,r,n)}function A(e,t,r,n){return K(function(e){for(var t=[],i=0;i<e.length;++i)t.push(255&e.charCodeAt(i));return t}(t),e,r,n)}function x(e,t,r,n){return A(e,t,r,n)}function L(e,t,r,n){return K(J(t),e,r,n)}function M(e,t,r,n){return K(function(e,t){for(var r,n,o,c=[],i=0;i<e.length&&!((t-=2)<0);++i)r=e.charCodeAt(i),n=r>>8,o=r%256,c.push(o),c.push(n);return c}(t,e.length-r),e,r,n)}function O(e,t,r){return 0===t&&r===e.length?n.fromByteArray(e):n.fromByteArray(e.slice(t,r))}function B(e,t,r){r=Math.min(e.length,r);for(var n=[],i=t;i<r;){var o,c,f,d,l=e[i],h=null,m=l>239?4:l>223?3:l>191?2:1;if(i+m<=r)switch(m){case 1:l<128&&(h=l);break;case 2:128==(192&(o=e[i+1]))&&(d=(31&l)<<6|63&o)>127&&(h=d);break;case 3:o=e[i+1],c=e[i+2],128==(192&o)&&128==(192&c)&&(d=(15&l)<<12|(63&o)<<6|63&c)>2047&&(d<55296||d>57343)&&(h=d);break;case 4:o=e[i+1],c=e[i+2],f=e[i+3],128==(192&o)&&128==(192&c)&&128==(192&f)&&(d=(15&l)<<18|(63&o)<<12|(63&c)<<6|63&f)>65535&&d<1114112&&(h=d)}null===h?(h=65533,m=1):h>65535&&(h-=65536,n.push(h>>>10&1023|55296),h=56320|1023&h),n.push(h),i+=m}return function(e){var t=e.length;if(t<=4096)return String.fromCharCode.apply(String,e);var r="",i=0;for(;i<t;)r+=String.fromCharCode.apply(String,e.slice(i,i+=4096));return r}(n)}t.Buffer=l,t.SlowBuffer=function(e){+e!=e&&(e=0);return l.alloc(+e)},t.INSPECT_MAX_BYTES=50,l.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),t.kMaxLength=f(),l.poolSize=8192,l._augment=function(e){return e.__proto__=l.prototype,e},l.from=function(e,t,r){return h(null,e,t,r)},l.TYPED_ARRAY_SUPPORT&&(l.prototype.__proto__=Uint8Array.prototype,l.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&l[Symbol.species]===l&&Object.defineProperty(l,Symbol.species,{value:null,configurable:!0})),l.alloc=function(e,t,r){return function(e,t,r,n){return m(t),t<=0?d(e,t):void 0!==r?"string"==typeof n?d(e,t).fill(r,n):d(e,t).fill(r):d(e,t)}(null,e,t,r)},l.allocUnsafe=function(e){return v(null,e)},l.allocUnsafeSlow=function(e){return v(null,e)},l.isBuffer=function(b){return!(null==b||!b._isBuffer)},l.compare=function(a,b){if(!l.isBuffer(a)||!l.isBuffer(b))throw new TypeError("Arguments must be Buffers");if(a===b)return 0;for(var e=a.length,t=b.length,i=0,r=Math.min(e,t);i<r;++i)if(a[i]!==b[i]){e=a[i],t=b[i];break}return e<t?-1:t<e?1:0},l.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(e,t){if(!c(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return l.alloc(0);var i;if(void 0===t)for(t=0,i=0;i<e.length;++i)t+=e[i].length;var r=l.allocUnsafe(t),n=0;for(i=0;i<e.length;++i){var o=e[i];if(!l.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(r,n),n+=o.length}return r},l.byteLength=R,l.prototype._isBuffer=!0,l.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var i=0;i<e;i+=2)k(this,i,i+1);return this},l.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var i=0;i<e;i+=4)k(this,i,i+3),k(this,i+1,i+2);return this},l.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var i=0;i<e;i+=8)k(this,i,i+7),k(this,i+1,i+6),k(this,i+2,i+5),k(this,i+3,i+4);return this},l.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?B(this,0,e):S.apply(this,arguments)},l.prototype.equals=function(b){if(!l.isBuffer(b))throw new TypeError("Argument must be a Buffer");return this===b||0===l.compare(this,b)},l.prototype.inspect=function(){var e="",r=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r&&(e+=" ... ")),"<Buffer "+e+">"},l.prototype.compare=function(e,t,r,n,o){if(!l.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===o&&(o=this.length),t<0||r>e.length||n<0||o>this.length)throw new RangeError("out of range index");if(n>=o&&t>=r)return 0;if(n>=o)return-1;if(t>=r)return 1;if(this===e)return 0;for(var c=(o>>>=0)-(n>>>=0),f=(r>>>=0)-(t>>>=0),d=Math.min(c,f),h=this.slice(n,o),m=e.slice(t,r),i=0;i<d;++i)if(h[i]!==m[i]){c=h[i],f=m[i];break}return c<f?-1:f<c?1:0},l.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},l.prototype.indexOf=function(e,t,r){return _(this,e,t,r,!0)},l.prototype.lastIndexOf=function(e,t,r){return _(this,e,t,r,!1)},l.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(r)?(r|=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var o=this.length-t;if((void 0===r||r>o)&&(r=o),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var c=!1;;)switch(n){case"hex":return C(this,e,t,r);case"utf8":case"utf-8":return E(this,e,t,r);case"ascii":return A(this,e,t,r);case"latin1":case"binary":return x(this,e,t,r);case"base64":return L(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return M(this,e,t,r);default:if(c)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),c=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function U(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(127&e[i]);return n}function D(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(e[i]);return n}function P(e,t,r){var n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);for(var o="",i=t;i<r;++i)o+=H(e[i]);return o}function j(e,t,r){for(var n=e.slice(t,r),o="",i=0;i<n.length;i+=2)o+=String.fromCharCode(n[i]+256*n[i+1]);return o}function I(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function F(e,t,r,n,o,c){if(!l.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>o||t<c)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}function N(e,t,r,n){t<0&&(t=65535+t+1);for(var i=0,o=Math.min(e.length-r,2);i<o;++i)e[r+i]=(t&255<<8*(n?i:1-i))>>>8*(n?i:1-i)}function z(e,t,r,n){t<0&&(t=4294967295+t+1);for(var i=0,o=Math.min(e.length-r,4);i<o;++i)e[r+i]=t>>>8*(n?i:3-i)&255}function W(e,t,r,n,o,c){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function Y(e,t,r,n,c){return c||W(e,0,r,4),o.write(e,t,r,n,23,4),r+4}function V(e,t,r,n,c){return c||W(e,0,r,8),o.write(e,t,r,n,52,8),r+8}l.prototype.slice=function(e,t){var r,n=this.length;if((e=~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e),l.TYPED_ARRAY_SUPPORT)(r=this.subarray(e,t)).__proto__=l.prototype;else{var o=t-e;r=new l(o,void 0);for(var i=0;i<o;++i)r[i]=this[i+e]}return r},l.prototype.readUIntLE=function(e,t,r){e|=0,t|=0,r||I(e,t,this.length);for(var n=this[e],o=1,i=0;++i<t&&(o*=256);)n+=this[e+i]*o;return n},l.prototype.readUIntBE=function(e,t,r){e|=0,t|=0,r||I(e,t,this.length);for(var n=this[e+--t],o=1;t>0&&(o*=256);)n+=this[e+--t]*o;return n},l.prototype.readUInt8=function(e,t){return t||I(e,1,this.length),this[e]},l.prototype.readUInt16LE=function(e,t){return t||I(e,2,this.length),this[e]|this[e+1]<<8},l.prototype.readUInt16BE=function(e,t){return t||I(e,2,this.length),this[e]<<8|this[e+1]},l.prototype.readUInt32LE=function(e,t){return t||I(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},l.prototype.readUInt32BE=function(e,t){return t||I(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},l.prototype.readIntLE=function(e,t,r){e|=0,t|=0,r||I(e,t,this.length);for(var n=this[e],o=1,i=0;++i<t&&(o*=256);)n+=this[e+i]*o;return n>=(o*=128)&&(n-=Math.pow(2,8*t)),n},l.prototype.readIntBE=function(e,t,r){e|=0,t|=0,r||I(e,t,this.length);for(var i=t,n=1,o=this[e+--i];i>0&&(n*=256);)o+=this[e+--i]*n;return o>=(n*=128)&&(o-=Math.pow(2,8*t)),o},l.prototype.readInt8=function(e,t){return t||I(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},l.prototype.readInt16LE=function(e,t){t||I(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},l.prototype.readInt16BE=function(e,t){t||I(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},l.prototype.readInt32LE=function(e,t){return t||I(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},l.prototype.readInt32BE=function(e,t){return t||I(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},l.prototype.readFloatLE=function(e,t){return t||I(e,4,this.length),o.read(this,e,!0,23,4)},l.prototype.readFloatBE=function(e,t){return t||I(e,4,this.length),o.read(this,e,!1,23,4)},l.prototype.readDoubleLE=function(e,t){return t||I(e,8,this.length),o.read(this,e,!0,52,8)},l.prototype.readDoubleBE=function(e,t){return t||I(e,8,this.length),o.read(this,e,!1,52,8)},l.prototype.writeUIntLE=function(e,t,r,n){(e=+e,t|=0,r|=0,n)||F(this,e,t,r,Math.pow(2,8*r)-1,0);var o=1,i=0;for(this[t]=255&e;++i<r&&(o*=256);)this[t+i]=e/o&255;return t+r},l.prototype.writeUIntBE=function(e,t,r,n){(e=+e,t|=0,r|=0,n)||F(this,e,t,r,Math.pow(2,8*r)-1,0);var i=r-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+r},l.prototype.writeUInt8=function(e,t,r){return e=+e,t|=0,r||F(this,e,t,1,255,0),l.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},l.prototype.writeUInt16LE=function(e,t,r){return e=+e,t|=0,r||F(this,e,t,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):N(this,e,t,!0),t+2},l.prototype.writeUInt16BE=function(e,t,r){return e=+e,t|=0,r||F(this,e,t,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):N(this,e,t,!1),t+2},l.prototype.writeUInt32LE=function(e,t,r){return e=+e,t|=0,r||F(this,e,t,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):z(this,e,t,!0),t+4},l.prototype.writeUInt32BE=function(e,t,r){return e=+e,t|=0,r||F(this,e,t,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):z(this,e,t,!1),t+4},l.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t|=0,!n){var o=Math.pow(2,8*r-1);F(this,e,t,r,o-1,-o)}var i=0,c=1,sub=0;for(this[t]=255&e;++i<r&&(c*=256);)e<0&&0===sub&&0!==this[t+i-1]&&(sub=1),this[t+i]=(e/c>>0)-sub&255;return t+r},l.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t|=0,!n){var o=Math.pow(2,8*r-1);F(this,e,t,r,o-1,-o)}var i=r-1,c=1,sub=0;for(this[t+i]=255&e;--i>=0&&(c*=256);)e<0&&0===sub&&0!==this[t+i+1]&&(sub=1),this[t+i]=(e/c>>0)-sub&255;return t+r},l.prototype.writeInt8=function(e,t,r){return e=+e,t|=0,r||F(this,e,t,1,127,-128),l.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},l.prototype.writeInt16LE=function(e,t,r){return e=+e,t|=0,r||F(this,e,t,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):N(this,e,t,!0),t+2},l.prototype.writeInt16BE=function(e,t,r){return e=+e,t|=0,r||F(this,e,t,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):N(this,e,t,!1),t+2},l.prototype.writeInt32LE=function(e,t,r){return e=+e,t|=0,r||F(this,e,t,4,2147483647,-2147483648),l.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):z(this,e,t,!0),t+4},l.prototype.writeInt32BE=function(e,t,r){return e=+e,t|=0,r||F(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):z(this,e,t,!1),t+4},l.prototype.writeFloatLE=function(e,t,r){return Y(this,e,t,!0,r)},l.prototype.writeFloatBE=function(e,t,r){return Y(this,e,t,!1,r)},l.prototype.writeDoubleLE=function(e,t,r){return V(this,e,t,!0,r)},l.prototype.writeDoubleBE=function(e,t,r){return V(this,e,t,!1,r)},l.prototype.copy=function(e,t,r,n){if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);var i,o=n-r;if(this===e&&r<t&&t<n)for(i=o-1;i>=0;--i)e[i+t]=this[i+r];else if(o<1e3||!l.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)e[i+t]=this[i+r];else Uint8Array.prototype.set.call(e,this.subarray(r,r+o),t);return o},l.prototype.fill=function(e,t,r,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),1===e.length){var code=e.charCodeAt(0);code<256&&(e=code)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!l.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;var i;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(i=t;i<r;++i)this[i]=e;else{var o=l.isBuffer(e)?e:$(new l(e,n).toString()),c=o.length;for(i=0;i<r-t;++i)this[i+t]=o[i%c]}return this};var G=/[^+\/0-9A-Za-z-_]/g;function H(e){return e<16?"0"+e.toString(16):e.toString(16)}function $(e,t){var r;t=t||1/0;for(var n=e.length,o=null,c=[],i=0;i<n;++i){if((r=e.charCodeAt(i))>55295&&r<57344){if(!o){if(r>56319){(t-=3)>-1&&c.push(239,191,189);continue}if(i+1===n){(t-=3)>-1&&c.push(239,191,189);continue}o=r;continue}if(r<56320){(t-=3)>-1&&c.push(239,191,189),o=r;continue}r=65536+(o-55296<<10|r-56320)}else o&&(t-=3)>-1&&c.push(239,191,189);if(o=null,r<128){if((t-=1)<0)break;c.push(r)}else if(r<2048){if((t-=2)<0)break;c.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;c.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;c.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return c}function J(e){return n.toByteArray(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(G,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function K(e,t,r,n){for(var i=0;i<n&&!(i+r>=t.length||i>=e.length);++i)t[i+r]=e[i];return i}}).call(this,r(35))},227:function(e,t){"function"==typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){if(t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}}},228:function(e,t,r){"use strict";var n,o="object"==typeof Reflect?Reflect:null,c=o&&"function"==typeof o.apply?o.apply:function(e,t,r){return Function.prototype.apply.call(e,t,r)};n=o&&"function"==typeof o.ownKeys?o.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var f=Number.isNaN||function(e){return e!=e};function d(){d.init.call(this)}e.exports=d,e.exports.once=function(e,t){return new Promise((function(r,n){function o(){void 0!==c&&e.removeListener("error",c),r([].slice.call(arguments))}var c;"error"!==t&&(c=function(r){e.removeListener(t,o),n(r)},e.once("error",c)),e.once(t,o)}))},d.EventEmitter=d,d.prototype._events=void 0,d.prototype._eventsCount=0,d.prototype._maxListeners=void 0;var l=10;function h(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function m(e){return void 0===e._maxListeners?d.defaultMaxListeners:e._maxListeners}function v(e,t,r,n){var o,c,f,d;if(h(r),void 0===(c=e._events)?(c=e._events=Object.create(null),e._eventsCount=0):(void 0!==c.newListener&&(e.emit("newListener",t,r.listener?r.listener:r),c=e._events),f=c[t]),void 0===f)f=c[t]=r,++e._eventsCount;else if("function"==typeof f?f=c[t]=n?[r,f]:[f,r]:n?f.unshift(r):f.push(r),(o=m(e))>0&&f.length>o&&!f.warned){f.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+f.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=e,l.type=t,l.count=f.length,d=l,console&&console.warn&&console.warn(d)}return e}function y(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function w(e,t,r){var n={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},o=y.bind(n);return o.listener=r,n.wrapFn=o,o}function R(e,t,r){var n=e._events;if(void 0===n)return[];var o=n[t];return void 0===o?[]:"function"==typeof o?r?[o.listener||o]:[o]:r?function(e){for(var t=new Array(e.length),i=0;i<t.length;++i)t[i]=e[i].listener||e[i];return t}(o):k(o,o.length)}function S(e){var t=this._events;if(void 0!==t){var r=t[e];if("function"==typeof r)return 1;if(void 0!==r)return r.length}return 0}function k(e,t){for(var r=new Array(t),i=0;i<t;++i)r[i]=e[i];return r}Object.defineProperty(d,"defaultMaxListeners",{enumerable:!0,get:function(){return l},set:function(e){if("number"!=typeof e||e<0||f(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");l=e}}),d.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},d.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||f(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},d.prototype.getMaxListeners=function(){return m(this)},d.prototype.emit=function(e){for(var t=[],i=1;i<arguments.length;i++)t.push(arguments[i]);var r="error"===e,n=this._events;if(void 0!==n)r=r&&void 0===n.error;else if(!r)return!1;if(r){var o;if(t.length>0&&(o=t[0]),o instanceof Error)throw o;var f=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw f.context=o,f}var d=n[e];if(void 0===d)return!1;if("function"==typeof d)c(d,this,t);else{var l=d.length,h=k(d,l);for(i=0;i<l;++i)c(h[i],this,t)}return!0},d.prototype.addListener=function(e,t){return v(this,e,t,!1)},d.prototype.on=d.prototype.addListener,d.prototype.prependListener=function(e,t){return v(this,e,t,!0)},d.prototype.once=function(e,t){return h(t),this.on(e,w(this,e,t)),this},d.prototype.prependOnceListener=function(e,t){return h(t),this.prependListener(e,w(this,e,t)),this},d.prototype.removeListener=function(e,t){var r,n,o,i,c;if(h(t),void 0===(n=this._events))return this;if(void 0===(r=n[e]))return this;if(r===t||r.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete n[e],n.removeListener&&this.emit("removeListener",e,r.listener||t));else if("function"!=typeof r){for(o=-1,i=r.length-1;i>=0;i--)if(r[i]===t||r[i].listener===t){c=r[i].listener,o=i;break}if(o<0)return this;0===o?r.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(r,o),1===r.length&&(n[e]=r[0]),void 0!==n.removeListener&&this.emit("removeListener",e,c||t)}return this},d.prototype.off=d.prototype.removeListener,d.prototype.removeAllListeners=function(e){var t,r,i;if(void 0===(r=this._events))return this;if(void 0===r.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==r[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete r[e]),this;if(0===arguments.length){var n,o=Object.keys(r);for(i=0;i<o.length;++i)"removeListener"!==(n=o[i])&&this.removeAllListeners(n);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=r[e]))this.removeListener(e,t);else if(void 0!==t)for(i=t.length-1;i>=0;i--)this.removeListener(e,t[i]);return this},d.prototype.listeners=function(e){return R(this,e,!0)},d.prototype.rawListeners=function(e){return R(this,e,!1)},d.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):S.call(e,t)},d.prototype.listenerCount=S,d.prototype.eventNames=function(){return this._eventsCount>0?n(this._events):[]}},229:function(e,t,r){(function(e){function r(e){return Object.prototype.toString.call(e)}t.isArray=function(e){return Array.isArray?Array.isArray(e):"[object Array]"===r(e)},t.isBoolean=function(e){return"boolean"==typeof e},t.isNull=function(e){return null===e},t.isNullOrUndefined=function(e){return null==e},t.isNumber=function(e){return"number"==typeof e},t.isString=function(e){return"string"==typeof e},t.isSymbol=function(e){return"symbol"==typeof e},t.isUndefined=function(e){return void 0===e},t.isRegExp=function(e){return"[object RegExp]"===r(e)},t.isObject=function(e){return"object"==typeof e&&null!==e},t.isDate=function(e){return"[object Date]"===r(e)},t.isError=function(e){return"[object Error]"===r(e)||e instanceof Error},t.isFunction=function(e){return"function"==typeof e},t.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},t.isBuffer=e.isBuffer}).call(this,r(226).Buffer)},230:function(e,t,r){(function(e){var n=Object.getOwnPropertyDescriptors||function(e){for(var t=Object.keys(e),r={},i=0;i<t.length;i++)r[t[i]]=Object.getOwnPropertyDescriptor(e,t[i]);return r},o=/%[sdj%]/g;t.format=function(e){if(!_(e)){for(var t=[],i=0;i<arguments.length;i++)t.push(d(arguments[i]));return t.join(" ")}i=1;for(var r=arguments,n=r.length,c=String(e).replace(o,(function(e){if("%%"===e)return"%";if(i>=n)return e;switch(e){case"%s":return String(r[i++]);case"%d":return Number(r[i++]);case"%j":try{return JSON.stringify(r[i++])}catch(e){return"[Circular]"}default:return e}})),f=r[i];i<n;f=r[++i])S(f)||!E(f)?c+=" "+f:c+=" "+d(f);return c},t.deprecate=function(r,n){if(void 0!==e&&!0===e.noDeprecation)return r;if(void 0===e)return function(){return t.deprecate(r,n).apply(this,arguments)};var o=!1;return function(){if(!o){if(e.throwDeprecation)throw new Error(n);e.traceDeprecation?console.trace(n):console.error(n),o=!0}return r.apply(this,arguments)}};var c,f={};function d(e,r){var n={seen:[],stylize:h};return arguments.length>=3&&(n.depth=arguments[2]),arguments.length>=4&&(n.colors=arguments[3]),R(r)?n.showHidden=r:r&&t._extend(n,r),T(n.showHidden)&&(n.showHidden=!1),T(n.depth)&&(n.depth=2),T(n.colors)&&(n.colors=!1),T(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=l),m(n,e,n.depth)}function l(e,t){var style=d.styles[t];return style?"["+d.colors[style][0]+"m"+e+"["+d.colors[style][1]+"m":e}function h(e,t){return e}function m(e,r,n){if(e.customInspect&&r&&L(r.inspect)&&r.inspect!==t.inspect&&(!r.constructor||r.constructor.prototype!==r)){var o=r.inspect(n,e);return _(o)||(o=m(e,o,n)),o}var c=function(e,t){if(T(t))return e.stylize("undefined","undefined");if(_(t)){var r="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(r,"string")}if(k(t))return e.stylize(""+t,"number");if(R(t))return e.stylize(""+t,"boolean");if(S(t))return e.stylize("null","null")}(e,r);if(c)return c;var f=Object.keys(r),d=function(e){var t={};return e.forEach((function(e,r){t[e]=!0})),t}(f);if(e.showHidden&&(f=Object.getOwnPropertyNames(r)),x(r)&&(f.indexOf("message")>=0||f.indexOf("description")>=0))return v(r);if(0===f.length){if(L(r)){var l=r.name?": "+r.name:"";return e.stylize("[Function"+l+"]","special")}if(C(r))return e.stylize(RegExp.prototype.toString.call(r),"regexp");if(A(r))return e.stylize(Date.prototype.toString.call(r),"date");if(x(r))return v(r)}var output,base="",h=!1,E=["{","}"];(w(r)&&(h=!0,E=["[","]"]),L(r))&&(base=" [Function"+(r.name?": "+r.name:"")+"]");return C(r)&&(base=" "+RegExp.prototype.toString.call(r)),A(r)&&(base=" "+Date.prototype.toUTCString.call(r)),x(r)&&(base=" "+v(r)),0!==f.length||h&&0!=r.length?n<0?C(r)?e.stylize(RegExp.prototype.toString.call(r),"regexp"):e.stylize("[Object]","special"):(e.seen.push(r),output=h?function(e,t,r,n,o){for(var output=[],i=0,c=t.length;i<c;++i)D(t,String(i))?output.push(y(e,t,r,n,String(i),!0)):output.push("");return o.forEach((function(o){o.match(/^\d+$/)||output.push(y(e,t,r,n,o,!0))})),output}(e,r,n,d,f):f.map((function(t){return y(e,r,n,d,t,h)})),e.seen.pop(),function(output,base,e){if(output.reduce((function(e,t){return t.indexOf("\n")>=0&&0,e+t.replace(/\u001b\[\d\d?m/g,"").length+1}),0)>60)return e[0]+(""===base?"":base+"\n ")+" "+output.join(",\n  ")+" "+e[1];return e[0]+base+" "+output.join(", ")+" "+e[1]}(output,base,E)):E[0]+base+E[1]}function v(e){return"["+Error.prototype.toString.call(e)+"]"}function y(e,t,r,n,o,c){var f,d,desc;if((desc=Object.getOwnPropertyDescriptor(t,o)||{value:t[o]}).get?d=desc.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):desc.set&&(d=e.stylize("[Setter]","special")),D(n,o)||(f="["+o+"]"),d||(e.seen.indexOf(desc.value)<0?(d=S(r)?m(e,desc.value,null):m(e,desc.value,r-1)).indexOf("\n")>-1&&(d=c?d.split("\n").map((function(line){return"  "+line})).join("\n").substr(2):"\n"+d.split("\n").map((function(line){return"   "+line})).join("\n")):d=e.stylize("[Circular]","special")),T(f)){if(c&&o.match(/^\d+$/))return d;(f=JSON.stringify(""+o)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(f=f.substr(1,f.length-2),f=e.stylize(f,"name")):(f=f.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),f=e.stylize(f,"string"))}return f+": "+d}function w(e){return Array.isArray(e)}function R(e){return"boolean"==typeof e}function S(e){return null===e}function k(e){return"number"==typeof e}function _(e){return"string"==typeof e}function T(e){return void 0===e}function C(e){return E(e)&&"[object RegExp]"===M(e)}function E(e){return"object"==typeof e&&null!==e}function A(e){return E(e)&&"[object Date]"===M(e)}function x(e){return E(e)&&("[object Error]"===M(e)||e instanceof Error)}function L(e){return"function"==typeof e}function M(e){return Object.prototype.toString.call(e)}function O(e){return e<10?"0"+e.toString(10):e.toString(10)}t.debuglog=function(r){if(T(c)&&(c=e.env.NODE_DEBUG||""),r=r.toUpperCase(),!f[r])if(new RegExp("\\b"+r+"\\b","i").test(c)){var n=e.pid;f[r]=function(){var e=t.format.apply(t,arguments);console.error("%s %d: %s",r,n,e)}}else f[r]=function(){};return f[r]},t.inspect=d,d.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},d.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},t.isArray=w,t.isBoolean=R,t.isNull=S,t.isNullOrUndefined=function(e){return null==e},t.isNumber=k,t.isString=_,t.isSymbol=function(e){return"symbol"==typeof e},t.isUndefined=T,t.isRegExp=C,t.isObject=E,t.isDate=A,t.isError=x,t.isFunction=L,t.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},t.isBuffer=r(259);var B=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function U(){var e=new Date,time=[O(e.getHours()),O(e.getMinutes()),O(e.getSeconds())].join(":");return[e.getDate(),B[e.getMonth()],time].join(" ")}function D(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.log=function(){console.log("%s - %s",U(),t.format.apply(t,arguments))},t.inherits=r(260),t._extend=function(e,t){if(!t||!E(t))return e;for(var r=Object.keys(t),i=r.length;i--;)e[r[i]]=t[r[i]];return e};var P="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;function j(e,t){if(!e){var r=new Error("Promise was rejected with a falsy value");r.reason=e,e=r}return t(e)}t.promisify=function(e){if("function"!=typeof e)throw new TypeError('The "original" argument must be of type Function');if(P&&e[P]){var t;if("function"!=typeof(t=e[P]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(t,P,{value:t,enumerable:!1,writable:!1,configurable:!0}),t}function t(){for(var t,r,n=new Promise((function(e,n){t=e,r=n})),o=[],i=0;i<arguments.length;i++)o.push(arguments[i]);o.push((function(e,n){e?r(e):t(n)}));try{e.apply(this,o)}catch(e){r(e)}return n}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),P&&Object.defineProperty(t,P,{value:t,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(t,n(e))},t.promisify.custom=P,t.callbackify=function(t){if("function"!=typeof t)throw new TypeError('The "original" argument must be of type Function');function r(){for(var r=[],i=0;i<arguments.length;i++)r.push(arguments[i]);var n=r.pop();if("function"!=typeof n)throw new TypeError("The last argument must be of type Function");var o=this,c=function(){return n.apply(o,arguments)};t.apply(this,r).then((function(t){e.nextTick(c,null,t)}),(function(t){e.nextTick(j,t,c)}))}return Object.setPrototypeOf(r,Object.getPrototypeOf(t)),Object.defineProperties(r,n(t)),r}}).call(this,r(89))},231:function(e,t,r){"use strict";(function(t){void 0===t||!t.version||0===t.version.indexOf("v0.")||0===t.version.indexOf("v1.")&&0!==t.version.indexOf("v1.8.")?e.exports={nextTick:function(e,r,n,o){if("function"!=typeof e)throw new TypeError('"callback" argument must be a function');var c,i,f=arguments.length;switch(f){case 0:case 1:return t.nextTick(e);case 2:return t.nextTick((function(){e.call(null,r)}));case 3:return t.nextTick((function(){e.call(null,r,n)}));case 4:return t.nextTick((function(){e.call(null,r,n,o)}));default:for(c=new Array(f-1),i=0;i<c.length;)c[i++]=arguments[i];return t.nextTick((function(){e.apply(null,c)}))}}}:e.exports=t}).call(this,r(89))},232:function(e,t){var r=[].slice;e.exports=function(e,t){if("string"==typeof t&&(t=e[t]),"function"!=typeof t)throw new Error("bind() requires a function");var n=r.call(arguments,2);return function(){return t.apply(e,n.concat(r.call(arguments)))}}},233:function(e,t,r){var n=r(230),o=r(242).Duplex,c=r(232),f=r(271),d=r(248)("socket.io-stream:iostream");function l(e){if(!(this instanceof l))return new l(e);l.super_.call(this,e),this.options=e,this.id=f(),this.socket=null,this.pushBuffer=[],this.writeBuffer=[],this._readable=!1,this._writable=!1,this.destroyed=!1,this.allowHalfOpen=e&&e.allowHalfOpen||!1,this.on("finish",this._onfinish),this.on("end",this._onend),this.on("error",this._onerror)}e.exports=l,n.inherits(l,o),l.prototype.destroy=function(){d("destroy"),this.destroyed?d("already destroyed"):(this.readable=this.writable=!1,this.socket&&(d("clean up"),this.socket.cleanup(this.id),this.socket=null),this.destroyed=!0)},l.prototype._read=function(e){var t;if(!this.destroyed)if(this.pushBuffer.length)for(;(t=this.pushBuffer.shift())&&t(););else this._readable=!0,this.socket._read(this.id,e)},l.prototype._onread=function(e){var t=this.writeBuffer.shift();if(t)return t();this._writable=!0},l.prototype._write=function(e,t,r){var n=this;function o(){n.destroyed||(n._writable=!1,n.socket._write(n.id,e,t,r))}this._writable?o():this.writeBuffer.push(o)},l.prototype._onwrite=function(e,t,r){var n=this;function o(){n._readable=!1;var o=n.push(e||"",t);return r(),o}this._readable?o():this.pushBuffer.push(o)},l.prototype._end=function(){this.pushBuffer.length?this.pushBuffer.push(c(this,"_done")):this._done()},l.prototype._done=function(){return this._readable=!1,this.push(null)},l.prototype._onfinish=function(){if(d("_onfinish"),this.socket&&this.socket._end(this.id),this.writable=!1,this._writableState.ended=!0,!this.readable||this._readableState.ended)return d("_onfinish: ended, destroy %s",this._readableState),this.destroy();d("_onfinish: not ended"),this.allowHalfOpen||(this.push(null),this.readable&&!this._readableState.endEmitted&&this.read(0))},l.prototype._onend=function(){if(d("_onend"),this.readable=!1,this._readableState.ended=!0,!this.writable||this._writableState.finished)return d("_onend: %s",this._writableState),this.destroy();d("_onend: not finished"),this.allowHalfOpen||this.end()},l.prototype._onerror=function(e){!e.remote&&this.socket&&this.socket._error(this.id,e),this.destroy()}},234:function(e,t,r){(t=e.exports=r(243)).Stream=t,t.Readable=t,t.Writable=r(236),t.Duplex=r(225),t.Transform=r(247),t.PassThrough=r(266)},235:function(e,t,r){var n=r(226),o=n.Buffer;function c(e,t){for(var r in e)t[r]=e[r]}function f(e,t,r){return o(e,t,r)}o.from&&o.alloc&&o.allocUnsafe&&o.allocUnsafeSlow?e.exports=n:(c(n,t),t.Buffer=f),c(o,f),f.from=function(e,t,r){if("number"==typeof e)throw new TypeError("Argument must not be a number");return o(e,t,r)},f.alloc=function(e,t,r){if("number"!=typeof e)throw new TypeError("Argument must be a number");var n=o(e);return void 0!==t?"string"==typeof r?n.fill(t,r):n.fill(t):n.fill(0),n},f.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return o(e)},f.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return n.SlowBuffer(e)}},236:function(e,t,r){"use strict";(function(t){var n=r(231);function o(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,r){var n=e.entry;e.entry=null;for(;n;){var o=n.callback;t.pendingcb--,o(r),n=n.next}t.corkedRequestsFree?t.corkedRequestsFree.next=e:t.corkedRequestsFree=e}(t,e)}}e.exports=k;var c,f=n.nextTick;k.WritableState=S;var d=Object.create(r(229));d.inherits=r(227);var l={deprecate:r(264)},h=r(244),m=r(235).Buffer,v=t.Uint8Array||function(){};var y,w=r(245);function R(){}function S(e,t){c=c||r(225),e=e||{};var d=t instanceof c;this.objectMode=!!e.objectMode,d&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var l=e.highWaterMark,h=e.writableHighWaterMark,m=this.objectMode?16:16384;this.highWaterMark=l||0===l?l:d&&(h||0===h)?h:m,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var v=!1===e.decodeStrings;this.decodeStrings=!v,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var r=e._writableState,o=r.sync,c=r.writecb;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(r),t)!function(e,t,r,o,c){--t.pendingcb,r?(n.nextTick(c,o),n.nextTick(x,e,t),e._writableState.errorEmitted=!0,e.emit("error",o)):(c(o),e._writableState.errorEmitted=!0,e.emit("error",o),x(e,t))}(e,r,o,t,c);else{var d=E(r);d||r.corked||r.bufferProcessing||!r.bufferedRequest||C(e,r),o?f(T,e,r,d,c):T(e,r,d,c)}}(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new o(this)}function k(e){if(c=c||r(225),!(y.call(k,this)||this instanceof c))return new k(e);this._writableState=new S(e,this),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),h.call(this)}function _(e,t,r,n,o,c,f){t.writelen=n,t.writecb=f,t.writing=!0,t.sync=!0,r?e._writev(o,t.onwrite):e._write(o,c,t.onwrite),t.sync=!1}function T(e,t,r,n){r||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,n(),x(e,t)}function C(e,t){t.bufferProcessing=!0;var r=t.bufferedRequest;if(e._writev&&r&&r.next){var n=t.bufferedRequestCount,c=new Array(n),f=t.corkedRequestsFree;f.entry=r;for(var d=0,l=!0;r;)c[d]=r,r.isBuf||(l=!1),r=r.next,d+=1;c.allBuffers=l,_(e,t,!0,t.length,c,"",f.finish),t.pendingcb++,t.lastBufferedRequest=null,f.next?(t.corkedRequestsFree=f.next,f.next=null):t.corkedRequestsFree=new o(t),t.bufferedRequestCount=0}else{for(;r;){var h=r.chunk,m=r.encoding,v=r.callback;if(_(e,t,!1,t.objectMode?1:h.length,h,m,v),r=r.next,t.bufferedRequestCount--,t.writing)break}null===r&&(t.lastBufferedRequest=null)}t.bufferedRequest=r,t.bufferProcessing=!1}function E(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function A(e,t){e._final((function(r){t.pendingcb--,r&&e.emit("error",r),t.prefinished=!0,e.emit("prefinish"),x(e,t)}))}function x(e,t){var r=E(t);return r&&(!function(e,t){t.prefinished||t.finalCalled||("function"==typeof e._final?(t.pendingcb++,t.finalCalled=!0,n.nextTick(A,e,t)):(t.prefinished=!0,e.emit("prefinish")))}(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"))),r}d.inherits(k,h),S.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(S.prototype,"buffer",{get:l.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(y=Function.prototype[Symbol.hasInstance],Object.defineProperty(k,Symbol.hasInstance,{value:function(object){return!!y.call(this,object)||this===k&&(object&&object._writableState instanceof S)}})):y=function(object){return object instanceof this},k.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},k.prototype.write=function(e,t,r){var o,c=this._writableState,f=!1,d=!c.objectMode&&(o=e,m.isBuffer(o)||o instanceof v);return d&&!m.isBuffer(e)&&(e=function(e){return m.from(e)}(e)),"function"==typeof t&&(r=t,t=null),d?t="buffer":t||(t=c.defaultEncoding),"function"!=typeof r&&(r=R),c.ended?function(e,t){var r=new Error("write after end");e.emit("error",r),n.nextTick(t,r)}(this,r):(d||function(e,t,r,o){var c=!0,f=!1;return null===r?f=new TypeError("May not write null values to stream"):"string"==typeof r||void 0===r||t.objectMode||(f=new TypeError("Invalid non-string/buffer chunk")),f&&(e.emit("error",f),n.nextTick(o,f),c=!1),c}(this,c,e,r))&&(c.pendingcb++,f=function(e,t,r,n,o,c){if(!r){var f=function(e,t,r){e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=m.from(t,r));return t}(t,n,o);n!==f&&(r=!0,o="buffer",n=f)}var d=t.objectMode?1:n.length;t.length+=d;var l=t.length<t.highWaterMark;l||(t.needDrain=!0);if(t.writing||t.corked){var h=t.lastBufferedRequest;t.lastBufferedRequest={chunk:n,encoding:o,isBuf:r,callback:c,next:null},h?h.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else _(e,t,!1,d,n,o,c);return l}(this,c,d,e,t,r)),f},k.prototype.cork=function(){this._writableState.corked++},k.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.bufferedRequest||C(this,e))},k.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(k.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),k.prototype._write=function(e,t,r){r(new Error("_write() is not implemented"))},k.prototype._writev=null,k.prototype.end=function(e,t,r){var o=this._writableState;"function"==typeof e?(r=e,e=null,t=null):"function"==typeof t&&(r=t,t=null),null!=e&&this.write(e,t),o.corked&&(o.corked=1,this.uncork()),o.ending||o.finished||function(e,t,r){t.ending=!0,x(e,t),r&&(t.finished?n.nextTick(r):e.once("finish",r));t.ended=!0,e.writable=!1}(this,o,r)},Object.defineProperty(k.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),k.prototype.destroy=w.destroy,k.prototype._undestroy=w.undestroy,k.prototype._destroy=function(e,t){this.end(),t(e)}}).call(this,r(35))},237:function(e,t,r){var content=r(277);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(59).default)("167150e4",content,!0,{sourceMap:!1})},239:function(e,t,r){for(var n,o=r(15),c=r(36),f=r(56),d=f("typed_array"),l=f("view"),h=!(!o.ArrayBuffer||!o.DataView),m=h,i=0,v="Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(",");i<9;)(n=o[v[i++]])?(c(n.prototype,d,!0),c(n.prototype,l,!0)):m=!1;e.exports={ABV:h,CONSTR:m,TYPED:d,VIEW:l}},240:function(e,t,r){var n=r(53),o=r(32);e.exports=function(e){if(void 0===e)return 0;var t=n(e),r=o(t);if(t!==r)throw RangeError("Wrong length!");return r}},241:function(e,t){var r={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==r.call(e)}},242:function(e,t,r){e.exports=o;var n=r(228).EventEmitter;function o(){n.call(this)}r(227)(o,n),o.Readable=r(234),o.Writable=r(267),o.Duplex=r(268),o.Transform=r(269),o.PassThrough=r(270),o.Stream=o,o.prototype.pipe=function(e,t){var source=this;function r(t){e.writable&&!1===e.write(t)&&source.pause&&source.pause()}function o(){source.readable&&source.resume&&source.resume()}source.on("data",r),e.on("drain",o),e._isStdio||t&&!1===t.end||(source.on("end",f),source.on("close",d));var c=!1;function f(){c||(c=!0,e.end())}function d(){c||(c=!0,"function"==typeof e.destroy&&e.destroy())}function l(e){if(h(),0===n.listenerCount(this,"error"))throw e}function h(){source.removeListener("data",r),e.removeListener("drain",o),source.removeListener("end",f),source.removeListener("close",d),source.removeListener("error",l),e.removeListener("error",l),source.removeListener("end",h),source.removeListener("close",h),e.removeListener("close",h)}return source.on("error",l),e.on("error",l),source.on("end",h),source.on("close",h),e.on("close",h),e.emit("pipe",source),e}},243:function(e,t,r){"use strict";(function(t,n){var o=r(231);e.exports=C;var c,f=r(241);C.ReadableState=T;r(228).EventEmitter;var d=function(e,t){return e.listeners(t).length},l=r(244),h=r(235).Buffer,m=t.Uint8Array||function(){};var v=Object.create(r(229));v.inherits=r(227);var y=r(261),w=void 0;w=y&&y.debuglog?y.debuglog("stream"):function(){};var R,S=r(262),k=r(245);v.inherits(C,l);var _=["error","close","destroy","pause","resume"];function T(e,t){e=e||{};var n=t instanceof(c=c||r(225));this.objectMode=!!e.objectMode,n&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var o=e.highWaterMark,f=e.readableHighWaterMark,d=this.objectMode?16:16384;this.highWaterMark=o||0===o?o:n&&(f||0===f)?f:d,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new S,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(R||(R=r(246).StringDecoder),this.decoder=new R(e.encoding),this.encoding=e.encoding)}function C(e){if(c=c||r(225),!(this instanceof C))return new C(e);this._readableState=new T(e,this),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),l.call(this)}function E(e,t,r,n,o){var c,f=e._readableState;null===t?(f.reading=!1,function(e,t){if(t.ended)return;if(t.decoder){var r=t.decoder.end();r&&r.length&&(t.buffer.push(r),t.length+=t.objectMode?1:r.length)}t.ended=!0,L(e)}(e,f)):(o||(c=function(e,t){var r;n=t,h.isBuffer(n)||n instanceof m||"string"==typeof t||void 0===t||e.objectMode||(r=new TypeError("Invalid non-string/buffer chunk"));var n;return r}(f,t)),c?e.emit("error",c):f.objectMode||t&&t.length>0?("string"==typeof t||f.objectMode||Object.getPrototypeOf(t)===h.prototype||(t=function(e){return h.from(e)}(t)),n?f.endEmitted?e.emit("error",new Error("stream.unshift() after end event")):A(e,f,t,!0):f.ended?e.emit("error",new Error("stream.push() after EOF")):(f.reading=!1,f.decoder&&!r?(t=f.decoder.write(t),f.objectMode||0!==t.length?A(e,f,t,!1):O(e,f)):A(e,f,t,!1))):n||(f.reading=!1));return function(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}(f)}function A(e,t,r,n){t.flowing&&0===t.length&&!t.sync?(e.emit("data",r),e.read(0)):(t.length+=t.objectMode?1:r.length,n?t.buffer.unshift(r):t.buffer.push(r),t.needReadable&&L(e)),O(e,t)}Object.defineProperty(C.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),C.prototype.destroy=k.destroy,C.prototype._undestroy=k.undestroy,C.prototype._destroy=function(e,t){this.push(null),t(e)},C.prototype.push=function(e,t){var r,n=this._readableState;return n.objectMode?r=!0:"string"==typeof e&&((t=t||n.defaultEncoding)!==n.encoding&&(e=h.from(e,t),t=""),r=!0),E(this,e,t,!1,r)},C.prototype.unshift=function(e){return E(this,e,null,!0,!1)},C.prototype.isPaused=function(){return!1===this._readableState.flowing},C.prototype.setEncoding=function(e){return R||(R=r(246).StringDecoder),this._readableState.decoder=new R(e),this._readableState.encoding=e,this};function x(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=8388608?e=8388608:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function L(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(w("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?o.nextTick(M,e):M(e))}function M(e){w("emit readable"),e.emit("readable"),P(e)}function O(e,t){t.readingMore||(t.readingMore=!0,o.nextTick(B,e,t))}function B(e,t){for(var r=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(w("maybeReadMore read 0"),e.read(0),r!==t.length);)r=t.length;t.readingMore=!1}function U(e){w("readable nexttick read 0"),e.read(0)}function D(e,t){t.reading||(w("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),P(e),t.flowing&&!t.reading&&e.read(0)}function P(e){var t=e._readableState;for(w("flow",t.flowing);t.flowing&&null!==e.read(););}function j(e,t){return 0===t.length?null:(t.objectMode?r=t.buffer.shift():!e||e>=t.length?(r=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.head.data:t.buffer.concat(t.length),t.buffer.clear()):r=function(e,t,r){var n;e<t.head.data.length?(n=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):n=e===t.head.data.length?t.shift():r?function(e,t){var p=t.head,r=1,n=p.data;e-=n.length;for(;p=p.next;){var o=p.data,c=e>o.length?o.length:e;if(c===o.length?n+=o:n+=o.slice(0,e),0===(e-=c)){c===o.length?(++r,p.next?t.head=p.next:t.head=t.tail=null):(t.head=p,p.data=o.slice(c));break}++r}return t.length-=r,n}(e,t):function(e,t){var r=h.allocUnsafe(e),p=t.head,n=1;p.data.copy(r),e-=p.data.length;for(;p=p.next;){var o=p.data,c=e>o.length?o.length:e;if(o.copy(r,r.length-e,0,c),0===(e-=c)){c===o.length?(++n,p.next?t.head=p.next:t.head=t.tail=null):(t.head=p,p.data=o.slice(c));break}++n}return t.length-=n,r}(e,t);return n}(e,t.buffer,t.decoder),r);var r}function I(e){var t=e._readableState;if(t.length>0)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,o.nextTick(F,t,e))}function F(e,t){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function N(e,t){for(var i=0,r=e.length;i<r;i++)if(e[i]===t)return i;return-1}C.prototype.read=function(e){w("read",e),e=parseInt(e,10);var t=this._readableState,r=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return w("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?I(this):L(this),null;if(0===(e=x(e,t))&&t.ended)return 0===t.length&&I(this),null;var n,o=t.needReadable;return w("need readable",o),(0===t.length||t.length-e<t.highWaterMark)&&w("length less than watermark",o=!0),t.ended||t.reading?w("reading or ended",o=!1):o&&(w("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=x(r,t))),null===(n=e>0?j(e,t):null)?(t.needReadable=!0,e=0):t.length-=e,0===t.length&&(t.ended||(t.needReadable=!0),r!==e&&t.ended&&I(this)),null!==n&&this.emit("data",n),n},C.prototype._read=function(e){this.emit("error",new Error("_read() is not implemented"))},C.prototype.pipe=function(e,t){var r=this,c=this._readableState;switch(c.pipesCount){case 0:c.pipes=e;break;case 1:c.pipes=[c.pipes,e];break;default:c.pipes.push(e)}c.pipesCount+=1,w("pipe count=%d opts=%j",c.pipesCount,t);var l=(!t||!1!==t.end)&&e!==n.stdout&&e!==n.stderr?m:C;function h(t,n){w("onunpipe"),t===r&&n&&!1===n.hasUnpiped&&(n.hasUnpiped=!0,w("cleanup"),e.removeListener("close",_),e.removeListener("finish",T),e.removeListener("drain",v),e.removeListener("error",k),e.removeListener("unpipe",h),r.removeListener("end",m),r.removeListener("end",C),r.removeListener("data",S),y=!0,!c.awaitDrain||e._writableState&&!e._writableState.needDrain||v())}function m(){w("onend"),e.end()}c.endEmitted?o.nextTick(l):r.once("end",l),e.on("unpipe",h);var v=function(e){return function(){var t=e._readableState;w("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&d(e,"data")&&(t.flowing=!0,P(e))}}(r);e.on("drain",v);var y=!1;var R=!1;function S(t){w("ondata"),R=!1,!1!==e.write(t)||R||((1===c.pipesCount&&c.pipes===e||c.pipesCount>1&&-1!==N(c.pipes,e))&&!y&&(w("false write response, pause",r._readableState.awaitDrain),r._readableState.awaitDrain++,R=!0),r.pause())}function k(t){w("onerror",t),C(),e.removeListener("error",k),0===d(e,"error")&&e.emit("error",t)}function _(){e.removeListener("finish",T),C()}function T(){w("onfinish"),e.removeListener("close",_),C()}function C(){w("unpipe"),r.unpipe(e)}return r.on("data",S),function(e,t,r){if("function"==typeof e.prependListener)return e.prependListener(t,r);e._events&&e._events[t]?f(e._events[t])?e._events[t].unshift(r):e._events[t]=[r,e._events[t]]:e.on(t,r)}(e,"error",k),e.once("close",_),e.once("finish",T),e.emit("pipe",r),c.flowing||(w("pipe resume"),r.resume()),e},C.prototype.unpipe=function(e){var t=this._readableState,r={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,r)),this;if(!e){var n=t.pipes,o=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var i=0;i<o;i++)n[i].emit("unpipe",this,r);return this}var c=N(t.pipes,e);return-1===c||(t.pipes.splice(c,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,r)),this},C.prototype.on=function(e,t){var r=l.prototype.on.call(this,e,t);if("data"===e)!1!==this._readableState.flowing&&this.resume();else if("readable"===e){var n=this._readableState;n.endEmitted||n.readableListening||(n.readableListening=n.needReadable=!0,n.emittedReadable=!1,n.reading?n.length&&L(this):o.nextTick(U,this))}return r},C.prototype.addListener=C.prototype.on,C.prototype.resume=function(){var e=this._readableState;return e.flowing||(w("resume"),e.flowing=!0,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,o.nextTick(D,e,t))}(this,e)),this},C.prototype.pause=function(){return w("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(w("pause"),this._readableState.flowing=!1,this.emit("pause")),this},C.prototype.wrap=function(e){var t=this,r=this._readableState,n=!1;for(var i in e.on("end",(function(){if(w("wrapped end"),r.decoder&&!r.ended){var e=r.decoder.end();e&&e.length&&t.push(e)}t.push(null)})),e.on("data",(function(o){(w("wrapped data"),r.decoder&&(o=r.decoder.write(o)),r.objectMode&&null==o)||(r.objectMode||o&&o.length)&&(t.push(o)||(n=!0,e.pause()))})),e)void 0===this[i]&&"function"==typeof e[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));for(var o=0;o<_.length;o++)e.on(_[o],this.emit.bind(this,_[o]));return this._read=function(t){w("wrapped _read",t),n&&(n=!1,e.resume())},this},Object.defineProperty(C.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),C._fromList=j}).call(this,r(35),r(89))},244:function(e,t,r){e.exports=r(228).EventEmitter},245:function(e,t,r){"use strict";var n=r(231);function o(e,t){e.emit("error",t)}e.exports={destroy:function(e,t){var r=this,c=this._readableState&&this._readableState.destroyed,f=this._writableState&&this._writableState.destroyed;return c||f?(t?t(e):!e||this._writableState&&this._writableState.errorEmitted||n.nextTick(o,this,e),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,(function(e){!t&&e?(n.nextTick(o,r,e),r._writableState&&(r._writableState.errorEmitted=!0)):t&&t(e)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},246:function(e,t,r){"use strict";var n=r(265).Buffer,o=n.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function c(e){var t;switch(this.encoding=function(e){var t=function(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(e);if("string"!=typeof t&&(n.isEncoding===o||!o(e)))throw new Error("Unknown encoding: "+e);return t||e}(e),this.encoding){case"utf16le":this.text=l,this.end=h,t=4;break;case"utf8":this.fillLast=d,t=4;break;case"base64":this.text=m,this.end=v,t=3;break;default:return this.write=y,void(this.end=w)}this.lastNeed=0,this.lastTotal=0,this.lastChar=n.allocUnsafe(t)}function f(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function d(e){var p=this.lastTotal-this.lastNeed,t=function(e,t,p){if(128!=(192&t[0]))return e.lastNeed=0,"�";if(e.lastNeed>1&&t.length>1){if(128!=(192&t[1]))return e.lastNeed=1,"�";if(e.lastNeed>2&&t.length>2&&128!=(192&t[2]))return e.lastNeed=2,"�"}}(this,e);return void 0!==t?t:this.lastNeed<=e.length?(e.copy(this.lastChar,p,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,p,0,e.length),void(this.lastNeed-=e.length))}function l(e,i){if((e.length-i)%2==0){var t=e.toString("utf16le",i);if(t){var r=t.charCodeAt(t.length-1);if(r>=55296&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],t.slice(0,-1)}return t}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",i,e.length-1)}function h(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,r)}return t}function m(e,i){var t=(e.length-i)%3;return 0===t?e.toString("base64",i):(this.lastNeed=3-t,this.lastTotal=3,1===t?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",i,e.length-t))}function v(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function y(e){return e.toString(this.encoding)}function w(e){return e&&e.length?this.write(e):""}t.StringDecoder=c,c.prototype.write=function(e){if(0===e.length)return"";var t,i;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";i=this.lastNeed,this.lastNeed=0}else i=0;return i<e.length?t?t+this.text(e,i):this.text(e,i):t||""},c.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"�":t},c.prototype.text=function(e,i){var t=function(e,t,i){var r=t.length-1;if(r<i)return 0;var n=f(t[r]);if(n>=0)return n>0&&(e.lastNeed=n-1),n;if(--r<i||-2===n)return 0;if((n=f(t[r]))>=0)return n>0&&(e.lastNeed=n-2),n;if(--r<i||-2===n)return 0;if((n=f(t[r]))>=0)return n>0&&(2===n?n=0:e.lastNeed=n-3),n;return 0}(this,e,i);if(!this.lastNeed)return e.toString("utf8",i);this.lastTotal=t;var r=e.length-(t-this.lastNeed);return e.copy(this.lastChar,0,r),e.toString("utf8",i,r)},c.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},247:function(e,t,r){"use strict";e.exports=f;var n=r(225),o=Object.create(r(229));function c(e,data){var t=this._transformState;t.transforming=!1;var r=t.writecb;if(!r)return this.emit("error",new Error("write callback called multiple times"));t.writechunk=null,t.writecb=null,null!=data&&this.push(data),r(e);var n=this._readableState;n.reading=!1,(n.needReadable||n.length<n.highWaterMark)&&this._read(n.highWaterMark)}function f(e){if(!(this instanceof f))return new f(e);n.call(this,e),this._transformState={afterTransform:c.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",d)}function d(){var e=this;"function"==typeof this._flush?this._flush((function(t,data){l(e,t,data)})):l(this,null,null)}function l(e,t,data){if(t)return e.emit("error",t);if(null!=data&&e.push(data),e._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(e._transformState.transforming)throw new Error("Calling transform done when still transforming");return e.push(null)}o.inherits=r(227),o.inherits(f,n),f.prototype.push=function(e,t){return this._transformState.needTransform=!1,n.prototype.push.call(this,e,t)},f.prototype._transform=function(e,t,r){throw new Error("_transform() is not implemented")},f.prototype._write=function(e,t,r){var n=this._transformState;if(n.writecb=r,n.writechunk=e,n.writeencoding=t,!n.transforming){var o=this._readableState;(n.needTransform||o.needReadable||o.length<o.highWaterMark)&&this._read(o.highWaterMark)}},f.prototype._read=function(e){var t=this._transformState;null!==t.writechunk&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0},f.prototype._destroy=function(e,t){var r=this;n.prototype._destroy.call(this,e,(function(e){t(e),r.emit("close")}))}},248:function(e,t,r){function n(){var e;try{e=t.storage.debug}catch(e){}return e}(t=e.exports=r(272)).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},t.formatArgs=function(){var e=arguments,r=this.useColors;if(e[0]=(r?"%c":"")+this.namespace+(r?" %c":" ")+e[0]+(r?"%c ":" ")+"+"+t.humanize(this.diff),!r)return e;var n="color: "+this.color;e=[e[0],n,"color: inherit"].concat(Array.prototype.slice.call(e,1));var o=0,c=0;return e[0].replace(/%[a-z%]/g,(function(e){"%%"!==e&&(o++,"%c"===e&&(c=o))})),e.splice(c,0,n),e},t.save=function(e){try{null==e?t.storage.removeItem("debug"):t.storage.debug=e}catch(e){}},t.load=n,t.useColors=function(){return"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31},t.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),t.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],t.formatters.j=function(e){return JSON.stringify(e)},t.enable(n())},249:function(e,t,r){r(250)("Int16",2,(function(e){return function(data,t,r){return e(this,data,t,r)}}))},250:function(e,t,r){"use strict";if(r(25)){var n=r(55),o=r(15),c=r(23),f=r(13),d=r(239),l=r(251),h=r(42),m=r(157),v=r(60),y=r(36),w=r(158),R=r(53),S=r(32),k=r(240),_=r(112),T=r(67),C=r(38),E=r(71),A=r(21),x=r(37),L=r(114),M=r(69),O=r(160),B=r(57).f,U=r(115),D=r(56),P=r(12),j=r(161),I=r(113),F=r(90),N=r(117),z=r(61),W=r(116),Y=r(118),V=r(159),G=r(252),H=r(27),$=r(70),J=H.f,K=$.f,Z=o.RangeError,X=o.TypeError,Q=o.Uint8Array,ee=Array.prototype,te=l.ArrayBuffer,re=l.DataView,ne=j(0),ie=j(2),oe=j(3),ae=j(4),se=j(5),ue=j(6),ce=I(!0),fe=I(!1),de=N.values,le=N.keys,he=N.entries,pe=ee.lastIndexOf,ge=ee.reduce,me=ee.reduceRight,ve=ee.join,be=ee.sort,ye=ee.slice,we=ee.toString,Re=ee.toLocaleString,Se=P("iterator"),ke=P("toStringTag"),_e=D("typed_constructor"),Te=D("def_constructor"),Ce=d.CONSTR,Ee=d.TYPED,Ae=d.VIEW,xe=j(1,(function(e,t){return Ue(F(e,e[Te]),t)})),Le=c((function(){return 1===new Q(new Uint16Array([1]).buffer)[0]})),Me=!!Q&&!!Q.prototype.set&&c((function(){new Q(1).set({})})),Oe=function(e,t){var r=R(e);if(r<0||r%t)throw Z("Wrong offset!");return r},Be=function(e){if(A(e)&&Ee in e)return e;throw X(e+" is not a typed array!")},Ue=function(e,t){if(!A(e)||!(_e in e))throw X("It is not a typed array constructor!");return new e(t)},De=function(e,t){return Pe(F(e,e[Te]),t)},Pe=function(e,t){for(var r=0,n=t.length,o=Ue(e,n);n>r;)o[r]=t[r++];return o},je=function(e,t,r){J(e,t,{get:function(){return this._d[r]}})},Ie=function(source){var i,e,t,r,n,o,c=x(source),f=arguments.length,d=f>1?arguments[1]:void 0,l=void 0!==d,m=U(c);if(null!=m&&!L(m)){for(o=m.call(c),t=[],i=0;!(n=o.next()).done;i++)t.push(n.value);c=t}for(l&&f>2&&(d=h(d,arguments[2],2)),i=0,e=S(c.length),r=Ue(this,e);e>i;i++)r[i]=l?d(c[i],i):c[i];return r},Fe=function(){for(var e=0,t=arguments.length,r=Ue(this,t);t>e;)r[e]=arguments[e++];return r},Ne=!!Q&&c((function(){Re.call(new Q(1))})),ze=function(){return Re.apply(Ne?ye.call(Be(this)):Be(this),arguments)},We={copyWithin:function(e,t){return G.call(Be(this),e,t,arguments.length>2?arguments[2]:void 0)},every:function(e){return ae(Be(this),e,arguments.length>1?arguments[1]:void 0)},fill:function(e){return V.apply(Be(this),arguments)},filter:function(e){return De(this,ie(Be(this),e,arguments.length>1?arguments[1]:void 0))},find:function(e){return se(Be(this),e,arguments.length>1?arguments[1]:void 0)},findIndex:function(e){return ue(Be(this),e,arguments.length>1?arguments[1]:void 0)},forEach:function(e){ne(Be(this),e,arguments.length>1?arguments[1]:void 0)},indexOf:function(e){return fe(Be(this),e,arguments.length>1?arguments[1]:void 0)},includes:function(e){return ce(Be(this),e,arguments.length>1?arguments[1]:void 0)},join:function(e){return ve.apply(Be(this),arguments)},lastIndexOf:function(e){return pe.apply(Be(this),arguments)},map:function(e){return xe(Be(this),e,arguments.length>1?arguments[1]:void 0)},reduce:function(e){return ge.apply(Be(this),arguments)},reduceRight:function(e){return me.apply(Be(this),arguments)},reverse:function(){for(var e,t=Be(this).length,r=Math.floor(t/2),n=0;n<r;)e=this[n],this[n++]=this[--t],this[t]=e;return this},some:function(e){return oe(Be(this),e,arguments.length>1?arguments[1]:void 0)},sort:function(e){return be.call(Be(this),e)},subarray:function(e,t){var r=Be(this),n=r.length,o=_(e,n);return new(F(r,r[Te]))(r.buffer,r.byteOffset+o*r.BYTES_PER_ELEMENT,S((void 0===t?n:_(t,n))-o))}},Ye=function(e,t){return De(this,ye.call(Be(this),e,t))},qe=function(e){Be(this);var t=Oe(arguments[1],1),r=this.length,n=x(e),o=S(n.length),c=0;if(o+t>r)throw Z("Wrong length!");for(;c<o;)this[t+c]=n[c++]},Ve={entries:function(){return he.call(Be(this))},keys:function(){return le.call(Be(this))},values:function(){return de.call(Be(this))}},Ge=function(e,t){return A(e)&&e[Ee]&&"symbol"!=typeof t&&t in e&&String(+t)==String(t)},He=function(e,t){return Ge(e,t=T(t,!0))?v(2,e[t]):K(e,t)},$e=function(e,t,desc){return!(Ge(e,t=T(t,!0))&&A(desc)&&C(desc,"value"))||C(desc,"get")||C(desc,"set")||desc.configurable||C(desc,"writable")&&!desc.writable||C(desc,"enumerable")&&!desc.enumerable?J(e,t,desc):(e[t]=desc.value,e)};Ce||($.f=He,H.f=$e),f(f.S+f.F*!Ce,"Object",{getOwnPropertyDescriptor:He,defineProperty:$e}),c((function(){we.call({})}))&&(we=Re=function(){return ve.call(this)});var Je=w({},We);w(Je,Ve),y(Je,Se,Ve.values),w(Je,{slice:Ye,set:qe,constructor:function(){},toString:we,toLocaleString:ze}),je(Je,"buffer","b"),je(Je,"byteOffset","o"),je(Je,"byteLength","l"),je(Je,"length","e"),J(Je,ke,{get:function(){return this[Ee]}}),e.exports=function(e,t,r,l){var h=e+((l=!!l)?"Clamped":"")+"Array",v="get"+e,w="set"+e,R=o[h],_=R||{},T=R&&O(R),C=!R||!d.ABV,x={},L=R&&R.prototype,U=function(e,r){J(e,r,{get:function(){return function(e,r){var data=e._d;return data.v[v](r*t+data.o,Le)}(this,r)},set:function(e){return function(e,r,n){var data=e._d;l&&(n=(n=Math.round(n))<0?0:n>255?255:255&n),data.v[w](r*t+data.o,n,Le)}(this,r,e)},enumerable:!0})};C?(R=r((function(e,data,r,n){m(e,R,h,"_d");var o,c,f,d,l=0,v=0;if(A(data)){if(!(data instanceof te||"ArrayBuffer"==(d=E(data))||"SharedArrayBuffer"==d))return Ee in data?Pe(R,data):Ie.call(R,data);o=data,v=Oe(r,t);var w=data.byteLength;if(void 0===n){if(w%t)throw Z("Wrong length!");if((c=w-v)<0)throw Z("Wrong length!")}else if((c=S(n)*t)+v>w)throw Z("Wrong length!");f=c/t}else f=k(data),o=new te(c=f*t);for(y(e,"_d",{b:o,o:v,l:c,e:f,v:new re(o)});l<f;)U(e,l++)})),L=R.prototype=M(Je),y(L,"constructor",R)):c((function(){R(1)}))&&c((function(){new R(-1)}))&&W((function(e){new R,new R(null),new R(1.5),new R(e)}),!0)||(R=r((function(e,data,r,n){var o;return m(e,R,h),A(data)?data instanceof te||"ArrayBuffer"==(o=E(data))||"SharedArrayBuffer"==o?void 0!==n?new _(data,Oe(r,t),n):void 0!==r?new _(data,Oe(r,t)):new _(data):Ee in data?Pe(R,data):Ie.call(R,data):new _(k(data))})),ne(T!==Function.prototype?B(_).concat(B(T)):B(_),(function(e){e in R||y(R,e,_[e])})),R.prototype=L,n||(L.constructor=R));var D=L[Se],P=!!D&&("values"==D.name||null==D.name),j=Ve.values;y(R,_e,!0),y(L,Ee,h),y(L,Ae,!0),y(L,Te,R),(l?new R(1)[ke]==h:ke in L)||J(L,ke,{get:function(){return h}}),x[h]=R,f(f.G+f.W+f.F*(R!=_),x),f(f.S,h,{BYTES_PER_ELEMENT:t}),f(f.S+f.F*c((function(){_.of.call(R,1)})),h,{from:Ie,of:Fe}),"BYTES_PER_ELEMENT"in L||y(L,"BYTES_PER_ELEMENT",t),f(f.P,h,We),Y(h),f(f.P+f.F*Me,h,{set:qe}),f(f.P+f.F*!P,h,Ve),n||L.toString==we||(L.toString=we),f(f.P+f.F*c((function(){new R(1).slice()})),h,{slice:Ye}),f(f.P+f.F*(c((function(){return[1,2].toLocaleString()!=new R([1,2]).toLocaleString()}))||!c((function(){L.toLocaleString.call([1,2])}))),h,{toLocaleString:ze}),z[h]=P?D:j,n||P||y(L,Se,j)}}else e.exports=function(){}},251:function(e,t,r){"use strict";var n=r(15),o=r(25),c=r(55),f=r(239),d=r(36),l=r(158),h=r(23),m=r(157),v=r(53),y=r(32),w=r(240),R=r(57).f,S=r(27).f,k=r(159),_=r(68),T=n.ArrayBuffer,C=n.DataView,E=n.Math,A=n.RangeError,x=n.Infinity,L=T,M=E.abs,O=E.pow,B=E.floor,U=E.log,D=E.LN2,P=o?"_b":"buffer",j=o?"_l":"byteLength",I=o?"_o":"byteOffset";function F(e,t,r){var n,o,c,f=new Array(r),d=8*r-t-1,l=(1<<d)-1,h=l>>1,rt=23===t?O(2,-24)-O(2,-77):0,i=0,s=e<0||0===e&&1/e<0?1:0;for((e=M(e))!=e||e===x?(o=e!=e?1:0,n=l):(n=B(U(e)/D),e*(c=O(2,-n))<1&&(n--,c*=2),(e+=n+h>=1?rt/c:rt*O(2,1-h))*c>=2&&(n++,c/=2),n+h>=l?(o=0,n=l):n+h>=1?(o=(e*c-1)*O(2,t),n+=h):(o=e*O(2,h-1)*O(2,t),n=0));t>=8;f[i++]=255&o,o/=256,t-=8);for(n=n<<t|o,d+=t;d>0;f[i++]=255&n,n/=256,d-=8);return f[--i]|=128*s,f}function N(e,t,r){var n,o=8*r-t-1,c=(1<<o)-1,f=c>>1,d=o-7,i=r-1,s=e[i--],l=127&s;for(s>>=7;d>0;l=256*l+e[i],i--,d-=8);for(n=l&(1<<-d)-1,l>>=-d,d+=t;d>0;n=256*n+e[i],i--,d-=8);if(0===l)l=1-f;else{if(l===c)return n?NaN:s?-x:x;n+=O(2,t),l-=f}return(s?-1:1)*n*O(2,l-t)}function z(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]}function W(e){return[255&e]}function Y(e){return[255&e,e>>8&255]}function V(e){return[255&e,e>>8&255,e>>16&255,e>>24&255]}function G(e){return F(e,52,8)}function H(e){return F(e,23,4)}function $(e,t,r){S(e.prototype,t,{get:function(){return this[r]}})}function J(view,e,t,r){var n=w(+t);if(n+e>view[j])throw A("Wrong index!");var o=view[P]._b,c=n+view[I],f=o.slice(c,c+e);return r?f:f.reverse()}function K(view,e,t,r,n,o){var c=w(+t);if(c+e>view[j])throw A("Wrong index!");for(var f=view[P]._b,d=c+view[I],l=r(+n),i=0;i<e;i++)f[d+i]=l[o?i:e-i-1]}if(f.ABV){if(!h((function(){T(1)}))||!h((function(){new T(-1)}))||h((function(){return new T,new T(1.5),new T(NaN),"ArrayBuffer"!=T.name}))){for(var Z,X=(T=function(e){return m(this,T),new L(w(e))}).prototype=L.prototype,Q=R(L),ee=0;Q.length>ee;)(Z=Q[ee++])in T||d(T,Z,L[Z]);c||(X.constructor=T)}var view=new C(new T(2)),te=C.prototype.setInt8;view.setInt8(0,2147483648),view.setInt8(1,2147483649),!view.getInt8(0)&&view.getInt8(1)||l(C.prototype,{setInt8:function(e,t){te.call(this,e,t<<24>>24)},setUint8:function(e,t){te.call(this,e,t<<24>>24)}},!0)}else T=function(e){m(this,T,"ArrayBuffer");var t=w(e);this._b=k.call(new Array(t),0),this[j]=t},C=function(e,t,r){m(this,C,"DataView"),m(e,T,"DataView");var n=e[j],o=v(t);if(o<0||o>n)throw A("Wrong offset!");if(o+(r=void 0===r?n-o:y(r))>n)throw A("Wrong length!");this[P]=e,this[I]=o,this[j]=r},o&&($(T,"byteLength","_l"),$(C,"buffer","_b"),$(C,"byteLength","_l"),$(C,"byteOffset","_o")),l(C.prototype,{getInt8:function(e){return J(this,1,e)[0]<<24>>24},getUint8:function(e){return J(this,1,e)[0]},getInt16:function(e){var t=J(this,2,e,arguments[1]);return(t[1]<<8|t[0])<<16>>16},getUint16:function(e){var t=J(this,2,e,arguments[1]);return t[1]<<8|t[0]},getInt32:function(e){return z(J(this,4,e,arguments[1]))},getUint32:function(e){return z(J(this,4,e,arguments[1]))>>>0},getFloat32:function(e){return N(J(this,4,e,arguments[1]),23,4)},getFloat64:function(e){return N(J(this,8,e,arguments[1]),52,8)},setInt8:function(e,t){K(this,1,e,W,t)},setUint8:function(e,t){K(this,1,e,W,t)},setInt16:function(e,t){K(this,2,e,Y,t,arguments[2])},setUint16:function(e,t){K(this,2,e,Y,t,arguments[2])},setInt32:function(e,t){K(this,4,e,V,t,arguments[2])},setUint32:function(e,t){K(this,4,e,V,t,arguments[2])},setFloat32:function(e,t){K(this,4,e,H,t,arguments[2])},setFloat64:function(e,t){K(this,8,e,G,t,arguments[2])}});_(T,"ArrayBuffer"),_(C,"DataView"),d(C.prototype,f.VIEW,!0),t.ArrayBuffer=T,t.DataView=C},252:function(e,t,r){"use strict";var n=r(37),o=r(112),c=r(32);e.exports=[].copyWithin||function(e,t){var r=n(this),f=c(r.length),d=o(e,f),l=o(t,f),h=arguments.length>2?arguments[2]:void 0,m=Math.min((void 0===h?f:o(h,f))-l,f-d),v=1;for(l<d&&d<l+m&&(v=-1,l+=m-1,d+=m-1);m-- >0;)l in r?r[d]=r[l]:delete r[d],d+=v,l+=v;return r}},253:function(e,t,r){"use strict";(function(r,n){var o;function c(e,t){if(!e)throw"First parameter is required.";t=new f(e,t=t||{type:"video"});var r=this;function n(r){r&&(t.initCallback=function(){r(),r=t.initCallback=null});var n=new d(e,t);(y=new n(e,t)).record(),v("recording"),t.disableLogs||console.log("Initialized recorderType:",y.constructor.name,"for output-type:",t.type)}function o(e){if(e=e||function(){},y){if("paused"===r.state)return r.resumeRecording(),void setTimeout((function(){o(e)}),1);"recording"===r.state||t.disableLogs||console.warn('Recording state should be: "recording", however current state is: ',r.state),t.disableLogs||console.log("Stopped recording "+t.type+" stream."),"gif"!==t.type?y.stop(n):(y.stop(),n()),v("stopped")}else S();function n(n){if(y){Object.keys(y).forEach((function(e){"function"!=typeof y[e]&&(r[e]=y[e])}));var o=y.blob;if(!o){if(!n)throw"Recording failed.";y.blob=o=n}if(o&&!t.disableLogs&&console.log(o.type,"->",A(o.size)),e){var c;try{c=R.createObjectURL(o)}catch(e){}"function"==typeof e.call?e.call(r,c):e(c)}t.autoWriteToDisk&&h((function(e){var r={};r[t.type+"Blob"]=e,N.Store(r)}))}else"function"==typeof e.call?e.call(r,""):e("")}}function l(e){postMessage((new FileReaderSync).readAsDataURL(e))}function h(e,r){if(!e)throw"Pass a callback function over getDataURL.";var n=r?r.blob:(y||{}).blob;if(!n)return t.disableLogs||console.warn("Blob encoder did not finish its job yet."),void setTimeout((function(){h(e,r)}),1e3);if("undefined"==typeof Worker||navigator.mozGetUserMedia){var o=new FileReader;o.readAsDataURL(n),o.onload=function(t){e(t.target.result)}}else{var c=function(e){try{var t=R.createObjectURL(new Blob([e.toString(),"this.onmessage =  function (eee) {"+e.name+"(eee.data);}"],{type:"application/javascript"})),r=new Worker(t);return R.revokeObjectURL(t),r}catch(e){}}(l);c.onmessage=function(t){e(t.data)},c.postMessage(n)}}function m(e){e=e||0,"paused"!==r.state?"stopped"!==r.state&&(e>=r.recordingDuration?o(r.onRecordingStopped):(e+=1e3,setTimeout((function(){m(e)}),1e3))):setTimeout((function(){m(e)}),1e3)}function v(e){r&&(r.state=e,"function"==typeof r.onStateChanged.call?r.onStateChanged.call(r,e):r.onStateChanged(e))}var y,w='It seems that recorder is destroyed or "startRecording" is not invoked for '+t.type+" recorder.";function S(){!0!==t.disableLogs&&console.warn(w)}var k={startRecording:function(o){return t.disableLogs||console.log("RecordRTC version: ",r.version),o&&(t=new f(e,o)),t.disableLogs||console.log("started recording "+t.type+" stream."),y?(y.clearRecordedData(),y.record(),v("recording"),r.recordingDuration&&m(),r):(n((function(){r.recordingDuration&&m()})),r)},stopRecording:o,pauseRecording:function(){y?"recording"===r.state?(v("paused"),y.pause(),t.disableLogs||console.log("Paused recording.")):t.disableLogs||console.warn("Unable to pause the recording. Recording state: ",r.state):S()},resumeRecording:function(){y?"paused"===r.state?(v("recording"),y.resume(),t.disableLogs||console.log("Resumed recording.")):t.disableLogs||console.warn("Unable to resume the recording. Recording state: ",r.state):S()},initRecorder:n,setRecordingDuration:function(e,t){if(void 0===e)throw"recordingDuration is required.";if("number"!=typeof e)throw"recordingDuration must be a number.";return r.recordingDuration=e,r.onRecordingStopped=t||function(){},{onRecordingStopped:function(e){r.onRecordingStopped=e}}},clearRecordedData:function(){y?(y.clearRecordedData(),t.disableLogs||console.log("Cleared old recorded data.")):S()},getBlob:function(){if(y)return y.blob;S()},getDataURL:h,toURL:function(){if(y)return R.createObjectURL(y.blob);S()},getInternalRecorder:function(){return y},save:function(e){y?x(y.blob,e):S()},getFromDisk:function(e){y?c.getFromDisk(t.type,e):S()},setAdvertisementArray:function(e){t.advertisement=[];for(var r=e.length,i=0;i<r;i++)t.advertisement.push({duration:i,image:e[i]})},blob:null,bufferSize:0,sampleRate:0,buffer:null,reset:function(){"recording"!==r.state||t.disableLogs||console.warn("Stop an active recorder."),y&&"function"==typeof y.clearRecordedData&&y.clearRecordedData(),y=null,v("inactive"),r.blob=null},onStateChanged:function(e){t.disableLogs||console.log("Recorder state changed:",e)},state:"inactive",getState:function(){return r.state},destroy:function(){var e=t.disableLogs;t={disableLogs:!0},r.reset(),v("destroyed"),k=r=null,B.AudioContextConstructor&&(B.AudioContextConstructor.close(),B.AudioContextConstructor=null),t.disableLogs=e,t.disableLogs||console.log("RecordRTC is destroyed.")},version:"5.6.1"};if(!this)return r=k,k;for(var _ in k)this[_]=k[_];return r=this,k}function f(e,t){return t.recorderType||t.type||(t.audio&&t.video?t.type="video":t.audio&&!t.video&&(t.type="audio")),t.recorderType&&!t.type&&(t.recorderType===I||t.recorderType===j||void 0!==V&&t.recorderType===V?t.type="video":t.recorderType===z?t.type="gif":t.recorderType===P?t.type="audio":t.recorderType===D&&(M(e,"audio").length&&M(e,"video").length||!M(e,"audio").length&&M(e,"video").length?t.type="video":M(e,"audio").length&&!M(e,"video").length&&(t.type="audio"))),void 0!==D&&"undefined"!=typeof MediaRecorder&&"requestData"in MediaRecorder.prototype&&(t.mimeType||(t.mimeType="video/webm"),t.type||(t.type=t.mimeType.split("/")[0]),t.bitsPerSecond),t.type||(t.mimeType&&(t.type=t.mimeType.split("/")[0]),t.type||(t.type="audio")),t}function d(e,t){var r;return(T||S||k)&&(r=P),"undefined"!=typeof MediaRecorder&&"requestData"in MediaRecorder.prototype&&!T&&(r=D),"video"===t.type&&(T||k)&&(r=I,void 0!==V&&"undefined"!=typeof ReadableStream&&(r=V)),"gif"===t.type&&(r=z),"canvas"===t.type&&(r=j),U()&&r!==j&&r!==z&&"undefined"!=typeof MediaRecorder&&"requestData"in MediaRecorder.prototype&&(M(e,"video").length||M(e,"audio").length)&&("audio"===t.type?"function"==typeof MediaRecorder.isTypeSupported&&MediaRecorder.isTypeSupported("audio/webm")&&(r=D):"function"==typeof MediaRecorder.isTypeSupported&&MediaRecorder.isTypeSupported("video/webm")&&(r=D)),e instanceof Array&&e.length&&(r=Y),t.recorderType&&(r=t.recorderType),!t.disableLogs&&r&&r.name&&console.log("Using recorderType:",r.name||r.constructor.name),!r&&C&&(r=D),r}function l(e){this.addStream=function(t){t&&(e=t)},this.mediaType={audio:!0,video:!0},this.startRecording=function(){var t,r=this.mediaType,n=this.mimeType||{audio:null,video:null,gif:null};if("function"!=typeof r.audio&&U()&&!M(e,"audio").length&&(r.audio=!1),"function"!=typeof r.video&&U()&&!M(e,"video").length&&(r.video=!1),"function"!=typeof r.gif&&U()&&!M(e,"video").length&&(r.gif=!1),!r.audio&&!r.video&&!r.gif)throw"MediaStream must have either audio or video tracks.";if(r.audio&&(t=null,"function"==typeof r.audio&&(t=r.audio),this.audioRecorder=new c(e,{type:"audio",bufferSize:this.bufferSize,sampleRate:this.sampleRate,numberOfAudioChannels:this.numberOfAudioChannels||2,disableLogs:this.disableLogs,recorderType:t,mimeType:n.audio,timeSlice:this.timeSlice,onTimeStamp:this.onTimeStamp}),r.video||this.audioRecorder.startRecording()),r.video){t=null,"function"==typeof r.video&&(t=r.video);var o=e;if(U()&&r.audio&&"function"==typeof r.audio){var f=M(e,"video")[0];_?((o=new E).addTrack(f),t&&t===I&&(t=D)):(o=new E).addTrack(f)}this.videoRecorder=new c(o,{type:"video",video:this.video,canvas:this.canvas,frameInterval:this.frameInterval||10,disableLogs:this.disableLogs,recorderType:t,mimeType:n.video,timeSlice:this.timeSlice,onTimeStamp:this.onTimeStamp,workerPath:this.workerPath,webAssemblyPath:this.webAssemblyPath,frameRate:this.frameRate,bitrate:this.bitrate}),r.audio||this.videoRecorder.startRecording()}if(r.audio&&r.video){var d=this,l=!0===U();(r.audio instanceof P&&r.video||!0!==r.audio&&!0!==r.video&&r.audio!==r.video)&&(l=!1),!0===l?(d.audioRecorder=null,d.videoRecorder.startRecording()):d.videoRecorder.initRecorder((function(){d.audioRecorder.initRecorder((function(){d.videoRecorder.startRecording(),d.audioRecorder.startRecording()}))}))}r.gif&&(t=null,"function"==typeof r.gif&&(t=r.gif),this.gifRecorder=new c(e,{type:"gif",frameRate:this.frameRate||200,quality:this.quality||10,disableLogs:this.disableLogs,recorderType:t,mimeType:n.gif}),this.gifRecorder.startRecording())},this.stopRecording=function(e){e=e||function(){},this.audioRecorder&&this.audioRecorder.stopRecording((function(t){e(t,"audio")})),this.videoRecorder&&this.videoRecorder.stopRecording((function(t){e(t,"video")})),this.gifRecorder&&this.gifRecorder.stopRecording((function(t){e(t,"gif")}))},this.pauseRecording=function(){this.audioRecorder&&this.audioRecorder.pauseRecording(),this.videoRecorder&&this.videoRecorder.pauseRecording(),this.gifRecorder&&this.gifRecorder.pauseRecording()},this.resumeRecording=function(){this.audioRecorder&&this.audioRecorder.resumeRecording(),this.videoRecorder&&this.videoRecorder.resumeRecording(),this.gifRecorder&&this.gifRecorder.resumeRecording()},this.getBlob=function(e){var output={};return this.audioRecorder&&(output.audio=this.audioRecorder.getBlob()),this.videoRecorder&&(output.video=this.videoRecorder.getBlob()),this.gifRecorder&&(output.gif=this.gifRecorder.getBlob()),e&&e(output),output},this.destroy=function(){this.audioRecorder&&(this.audioRecorder.destroy(),this.audioRecorder=null),this.videoRecorder&&(this.videoRecorder.destroy(),this.videoRecorder=null),this.gifRecorder&&(this.gifRecorder.destroy(),this.gifRecorder=null)},this.getDataURL=function(e){function t(e,t){if("undefined"!=typeof Worker){var r=function(e){var t,r=R.createObjectURL(new Blob([e.toString(),"this.onmessage =  function (eee) {"+e.name+"(eee.data);}"],{type:"application/javascript"})),n=new Worker(r);if(void 0!==R)t=R;else{if("undefined"==typeof webkitURL)throw"Neither URL nor webkitURL detected.";t=webkitURL}return t.revokeObjectURL(r),n}((function(e){postMessage((new FileReaderSync).readAsDataURL(e))}));r.onmessage=function(e){t(e.data)},r.postMessage(e)}else{var n=new FileReader;n.readAsDataURL(e),n.onload=function(e){t(e.target.result)}}}this.getBlob((function(r){r.audio&&r.video?t(r.audio,(function(n){t(r.video,(function(t){e({audio:n,video:t})}))})):r.audio?t(r.audio,(function(t){e({audio:t})})):r.video&&t(r.video,(function(t){e({video:t})}))}))},this.writeToDisk=function(){c.writeToDisk({audio:this.audioRecorder,video:this.videoRecorder,gif:this.gifRecorder})},this.save=function(e){(e=e||{audio:!0,video:!0,gif:!0}).audio&&this.audioRecorder&&this.audioRecorder.save("string"==typeof e.audio?e.audio:""),e.video&&this.videoRecorder&&this.videoRecorder.save("string"==typeof e.video?e.video:""),e.gif&&this.gifRecorder&&this.gifRecorder.save("string"==typeof e.gif?e.gif:"")}}c.version="5.6.1",e.exports=c,void 0===(o=function(){return c}.apply(t,[]))||(e.exports=o),c.getFromDisk=function(e,t){if(!t)throw"callback is mandatory.";console.log("Getting recorded "+("all"===e?"blobs":e+" blob ")+" from disk!"),N.Fetch((function(r,n){"all"!==e&&n===e+"Blob"&&t&&t(r),"all"===e&&t&&t(r,n.replace("Blob",""))}))},c.writeToDisk=function(e){console.log("Writing recorded blob(s) to disk!"),(e=e||{}).audio&&e.video&&e.gif?e.audio.getDataURL((function(t){e.video.getDataURL((function(r){e.gif.getDataURL((function(e){N.Store({audioBlob:t,videoBlob:r,gifBlob:e})}))}))})):e.audio&&e.video?e.audio.getDataURL((function(t){e.video.getDataURL((function(e){N.Store({audioBlob:t,videoBlob:e})}))})):e.audio&&e.gif?e.audio.getDataURL((function(t){e.gif.getDataURL((function(e){N.Store({audioBlob:t,gifBlob:e})}))})):e.video&&e.gif?e.video.getDataURL((function(t){e.gif.getDataURL((function(e){N.Store({videoBlob:t,gifBlob:e})}))})):e.audio?e.audio.getDataURL((function(e){N.Store({audioBlob:e})})):e.video?e.video.getDataURL((function(e){N.Store({videoBlob:e})})):e.gif&&e.gif.getDataURL((function(e){N.Store({gifBlob:e})}))},l.getFromDisk=c.getFromDisk,l.writeToDisk=c.writeToDisk,void 0!==c&&(c.MRecordRTC=l);var h;(h=void 0!==r?r:null)&&"undefined"==typeof window&&void 0!==r&&(r.navigator={userAgent:"Fake/5.0 (FakeOS) AppleWebKit/123 (KHTML, like Gecko) Fake/12.3.4567.89 Fake/123.45",getUserMedia:function(){}},r.console||(r.console={}),void 0!==r.console.log&&void 0!==r.console.error||(r.console.error=r.console.log=r.console.log||function(){console.log(arguments)}),"undefined"==typeof document&&(h.document={documentElement:{appendChild:function(){return""}}},document.createElement=document.captureStream=document.mozCaptureStream=function(){var e={getContext:function(){return e},play:function(){},pause:function(){},drawImage:function(){},toDataURL:function(){return""},style:{}};return e},h.HTMLVideoElement=function(){}),"undefined"==typeof location&&(h.location={protocol:"file:",href:"",hash:""}),"undefined"==typeof screen&&(h.screen={width:0,height:0}),void 0===R&&(h.URL={createObjectURL:function(){return""},revokeObjectURL:function(){return""}}),h.window=r);var m=window.requestAnimationFrame;if(void 0===m)if("undefined"!=typeof webkitRequestAnimationFrame)m=webkitRequestAnimationFrame;else if("undefined"!=typeof mozRequestAnimationFrame)m=mozRequestAnimationFrame;else if("undefined"!=typeof msRequestAnimationFrame)m=msRequestAnimationFrame;else if(void 0===m){var v=0;m=function(e,element){var t=(new Date).getTime(),r=Math.max(0,16-(t-v)),n=setTimeout((function(){e(t+r)}),r);return v=t+r,n}}var y=window.cancelAnimationFrame;void 0===y&&("undefined"!=typeof webkitCancelAnimationFrame?y=webkitCancelAnimationFrame:"undefined"!=typeof mozCancelAnimationFrame?y=mozCancelAnimationFrame:"undefined"!=typeof msCancelAnimationFrame?y=msCancelAnimationFrame:void 0===y&&(y=function(e){clearTimeout(e)}));var w=window.AudioContext;void 0===w&&("undefined"!=typeof webkitAudioContext&&(w=webkitAudioContext),"undefined"!=typeof mozAudioContext&&(w=mozAudioContext));var R=window.URL;void 0===R&&"undefined"!=typeof webkitURL&&(R=webkitURL),"undefined"!=typeof navigator&&void 0===navigator.getUserMedia&&(void 0!==navigator.webkitGetUserMedia&&(navigator.getUserMedia=navigator.webkitGetUserMedia),void 0!==navigator.mozGetUserMedia&&(navigator.getUserMedia=navigator.mozGetUserMedia));var S=!(-1===navigator.userAgent.indexOf("Edge")||!navigator.msSaveBlob&&!navigator.msSaveOrOpenBlob),k=!!window.opera||-1!==navigator.userAgent.indexOf("OPR/"),_=navigator.userAgent.toLowerCase().indexOf("firefox")>-1&&"netscape"in window&&/ rv:/.test(navigator.userAgent),T=!k&&!S&&!!navigator.webkitGetUserMedia||L()||-1!==navigator.userAgent.toLowerCase().indexOf("chrome/"),C=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);C&&!T&&-1!==navigator.userAgent.indexOf("CriOS")&&(C=!1,T=!0);var E=window.MediaStream;function A(e){if(0===e)return"0 Bytes";var i=parseInt(Math.floor(Math.log(e)/Math.log(1e3)),10);return(e/Math.pow(1e3,i)).toPrecision(3)+" "+["Bytes","KB","MB","GB","TB"][i]}function x(e,t){if(!e)throw"Blob object is required.";if(!e.type)try{e.type="video/webm"}catch(e){}var r=(e.type||"video/webm").split("/")[1];if(t&&-1!==t.indexOf(".")){var n=t.split(".");t=n[0],r=n[1]}var o=(t||Math.round(9999999999*Math.random())+888888888)+"."+r;if(void 0!==navigator.msSaveOrOpenBlob)return navigator.msSaveOrOpenBlob(e,o);if(void 0!==navigator.msSaveBlob)return navigator.msSaveBlob(e,o);var c=document.createElement("a");c.href=R.createObjectURL(e),c.download=o,c.style="display:none;opacity:0;color:transparent;",(document.body||document.documentElement).appendChild(c),"function"==typeof c.click?c.click():(c.target="_blank",c.dispatchEvent(new MouseEvent("click",{view:window,bubbles:!0,cancelable:!0}))),R.revokeObjectURL(c.href)}function L(){return"undefined"!=typeof window&&"object"==typeof window.process&&"renderer"===window.process.type||(!(void 0===n||"object"!=typeof n.versions||!n.versions.electron)||"object"==typeof navigator&&"string"==typeof navigator.userAgent&&navigator.userAgent.indexOf("Electron")>=0)}function M(e,t){return e&&e.getTracks?e.getTracks().filter((function(e){return e.kind===(t||"audio")})):[]}function O(e,element){"srcObject"in element?element.srcObject=e:"mozSrcObject"in element?element.mozSrcObject=e:element.srcObject=e}void 0===E&&"undefined"!=typeof webkitMediaStream&&(E=webkitMediaStream),void 0!==E&&void 0===E.prototype.stop&&(E.prototype.stop=function(){this.getTracks().forEach((function(track){track.stop()}))}),void 0!==c&&(c.invokeSaveAsDialog=x,c.getTracks=M,c.getSeekableBlob=function(e,t){if("undefined"==typeof EBML)throw new Error("Please link: https://www.webrtc-experiment.com/EBML.js");var r=new EBML.Reader,n=new EBML.Decoder,o=EBML.tools,c=new FileReader;c.onload=function(e){n.decode(this.result).forEach((function(element){r.read(element)})),r.stop();var c=o.makeMetadataSeekable(r.metadatas,r.duration,r.cues),body=this.result.slice(r.metadataSize),f=new Blob([c,body],{type:"video/webm"});t(f)},c.readAsArrayBuffer(e)},c.bytesToSize=A,c.isElectron=L);var B={};function U(){if(_||C||S)return!0;navigator.appVersion;var e,t,r=navigator.userAgent,n=""+parseFloat(navigator.appVersion),o=parseInt(navigator.appVersion,10);return(T||k)&&(e=r.indexOf("Chrome"),n=r.substring(e+7)),-1!==(t=n.indexOf(";"))&&(n=n.substring(0,t)),-1!==(t=n.indexOf(" "))&&(n=n.substring(0,t)),o=parseInt(""+n,10),isNaN(o)&&(n=""+parseFloat(navigator.appVersion),o=parseInt(navigator.appVersion,10)),o>=49}function D(e,t){var r=this;if(void 0===e)throw'First argument "MediaStream" is required.';if("undefined"==typeof MediaRecorder)throw"Your browser does not support the Media Recorder API. Please try other modules e.g. WhammyRecorder or StereoAudioRecorder.";if("audio"===(t=t||{mimeType:"video/webm"}).type){var n;if(M(e,"video").length&&M(e,"audio").length)navigator.mozGetUserMedia?(n=new E).addTrack(M(e,"audio")[0]):n=new E(M(e,"audio")),e=n;t.mimeType&&-1!==t.mimeType.toString().toLowerCase().indexOf("audio")||(t.mimeType=T?"audio/webm":"audio/ogg"),t.mimeType&&"audio/ogg"!==t.mimeType.toString().toLowerCase()&&navigator.mozGetUserMedia&&(t.mimeType="audio/ogg")}var o,c=[];function f(){r.timestamps.push((new Date).getTime()),"function"==typeof t.onTimeStamp&&t.onTimeStamp(r.timestamps[r.timestamps.length-1],r.timestamps)}function d(e){return o&&o.mimeType?o.mimeType:e.mimeType||"video/webm"}function l(){c=[],o=null,r.timestamps=[]}this.getArrayOfBlobs=function(){return c},this.record=function(){r.blob=null,r.clearRecordedData(),r.timestamps=[],h=[],c=[];var n=t;t.disableLogs||console.log("Passing following config over MediaRecorder API.",n),o&&(o=null),T&&!U()&&(n="video/vp8"),"function"==typeof MediaRecorder.isTypeSupported&&n.mimeType&&(MediaRecorder.isTypeSupported(n.mimeType)||(t.disableLogs||console.warn("MediaRecorder API seems unable to record mimeType:",n.mimeType),n.mimeType="audio"===t.type?"audio/webm":"video/webm"));try{o=new MediaRecorder(e,n),t.mimeType=n.mimeType}catch(t){o=new MediaRecorder(e)}n.mimeType&&!MediaRecorder.isTypeSupported&&"canRecordMimeType"in o&&!1===o.canRecordMimeType(n.mimeType)&&(t.disableLogs||console.warn("MediaRecorder API seems unable to record mimeType:",n.mimeType)),o.ondataavailable=function(e){if(e.data&&h.push("ondataavailable: "+A(e.data.size)),"number"!=typeof t.timeSlice)!e.data||!e.data.size||e.data.size<100||r.blob?r.recordingCallback&&(r.recordingCallback(new Blob([],{type:d(n)})),r.recordingCallback=null):(r.blob=t.getNativeBlob?e.data:new Blob([e.data],{type:d(n)}),r.recordingCallback&&(r.recordingCallback(r.blob),r.recordingCallback=null));else if(e.data&&e.data.size&&e.data.size>100&&(c.push(e.data),f(),"function"==typeof t.ondataavailable)){var o=t.getNativeBlob?e.data:new Blob([e.data],{type:d(n)});t.ondataavailable(o)}},o.onstart=function(){h.push("started")},o.onpause=function(){h.push("paused")},o.onresume=function(){h.push("resumed")},o.onstop=function(){h.push("stopped")},o.onerror=function(e){e&&(e.name||(e.name="UnknownError"),h.push("error: "+e),t.disableLogs||(-1!==e.name.toString().toLowerCase().indexOf("invalidstate")?console.error("The MediaRecorder is not in a state in which the proposed operation is allowed to be executed.",e):-1!==e.name.toString().toLowerCase().indexOf("notsupported")?console.error("MIME type (",n.mimeType,") is not supported.",e):-1!==e.name.toString().toLowerCase().indexOf("security")?console.error("MediaRecorder security error",e):"OutOfMemory"===e.name?console.error("The UA has exhaused the available memory. User agents SHOULD provide as much additional information as possible in the message attribute.",e):"IllegalStreamModification"===e.name?console.error("A modification to the stream has occurred that makes it impossible to continue recording. An example would be the addition of a Track while recording is occurring. User agents SHOULD provide as much additional information as possible in the message attribute.",e):"OtherRecordingError"===e.name?console.error("Used for an fatal error other than those listed above. User agents SHOULD provide as much additional information as possible in the message attribute.",e):"GenericError"===e.name?console.error("The UA cannot provide the codec or recording option that has been requested.",e):console.error("MediaRecorder Error",e)),function(e){if(!r.manuallyStopped&&o&&"inactive"===o.state)return delete t.timeslice,void o.start(6e5);setTimeout(void 0,1e3)}(),"inactive"!==o.state&&"stopped"!==o.state&&o.stop())},"number"==typeof t.timeSlice?(f(),o.start(t.timeSlice)):o.start(36e5),t.initCallback&&t.initCallback()},this.timestamps=[],this.stop=function(e){e=e||function(){},r.manuallyStopped=!0,o&&(this.recordingCallback=e,"recording"===o.state&&o.stop(),"number"==typeof t.timeSlice&&setTimeout((function(){r.blob=new Blob(c,{type:d(t)}),r.recordingCallback(r.blob)}),100))},this.pause=function(){o&&"recording"===o.state&&o.pause()},this.resume=function(){o&&"paused"===o.state&&o.resume()},this.clearRecordedData=function(){o&&"recording"===o.state&&r.stop(l),l()},this.getInternalRecorder=function(){return o},this.blob=null,this.getState=function(){return o&&o.state||"inactive"};var h=[];this.getAllStates=function(){return h},void 0===t.checkForInactiveTracks&&(t.checkForInactiveTracks=!1);r=this;!function n(){if(o&&!1!==t.checkForInactiveTracks)return!1===function(){if("active"in e){if(!e.active)return!1}else if("ended"in e&&e.ended)return!1;return!0}()?(t.disableLogs||console.log("MediaStream seems stopped."),void r.stop()):void setTimeout(n,1e3)}(),this.name="MediaStreamRecorder",this.toString=function(){return this.name}}function P(e,t){if(!M(e,"audio").length)throw"Your stream has no audio tracks.";var r,n=this,o=[],f=[],d=!1,l=0,h=2,m=(t=t||{}).desiredSampRate;function v(){if(!1===t.checkForInactiveTracks)return!0;if("active"in e){if(!e.active)return!1}else if("ended"in e&&e.ended)return!1;return!0}function y(e,t){function r(e,t){var r,n=e.numberOfAudioChannels,o=e.leftBuffers.slice(0),c=e.rightBuffers.slice(0),f=e.sampleRate,d=e.internalInterleavedLength,l=e.desiredSampRate;function h(data,e,t){var r=Math.round(data.length*(e/t)),n=[],o=Number((data.length-1)/(r-1));n[0]=data[0];for(var i=1;i<r-1;i++){var c=i*o,f=Number(Math.floor(c)).toFixed(),d=Number(Math.ceil(c)).toFixed(),l=c-f;n[i]=m(data[f],data[d],l)}return n[r-1]=data[data.length-1],n}function m(e,t,r){return e+(t-e)*r}function v(e,t){for(var r=new Float64Array(t),n=0,o=e.length,i=0;i<o;i++){var c=e[i];r.set(c,n),n+=c.length}return r}function y(view,e,t){for(var r=t.length,i=0;i<r;i++)view.setUint8(e+i,t.charCodeAt(i))}2===n&&(o=v(o,d),c=v(c,d),l&&(o=h(o,l,f),c=h(c,l,f))),1===n&&(o=v(o,d),l&&(o=h(o,l,f))),l&&(f=l),2===n&&(r=function(e,t){for(var r=e.length+t.length,n=new Float64Array(r),o=0,c=0;c<r;)n[c++]=e[o],n[c++]=t[o],o++;return n}(o,c)),1===n&&(r=o);var w=r.length,R=new ArrayBuffer(44+2*w),view=new DataView(R);y(view,0,"RIFF"),view.setUint32(4,36+2*w,!0),y(view,8,"WAVE"),y(view,12,"fmt "),view.setUint32(16,16,!0),view.setUint16(20,1,!0),view.setUint16(22,n,!0),view.setUint32(24,f,!0),view.setUint32(28,2*f,!0),view.setUint16(32,2*n,!0),view.setUint16(34,16,!0),y(view,36,"data"),view.setUint32(40,2*w,!0);for(var S=w,k=44,i=0;i<S;i++)view.setInt16(k,32767*r[i],!0),k+=2;if(t)return t({buffer:R,view:view});postMessage({buffer:R,view:view})}if(e.noWorker)r(e,(function(data){t(data.buffer,data.view)}));else{var n,o,c,f=(n=r,o=R.createObjectURL(new Blob([n.toString(),";this.onmessage =  function (eee) {"+n.name+"(eee.data);}"],{type:"application/javascript"})),(c=new Worker(o)).workerURL=o,c);f.onmessage=function(e){t(e.data.buffer,e.data.view),R.revokeObjectURL(f.workerURL),f.terminate()},f.postMessage(e)}}!0===t.leftChannel&&(h=1),1===t.numberOfAudioChannels&&(h=1),(!h||h<1)&&(h=2),t.disableLogs||console.log("StereoAudioRecorder is set to record number of channels: "+h),void 0===t.checkForInactiveTracks&&(t.checkForInactiveTracks=!0),this.record=function(){if(!1===v())throw"Please make sure MediaStream is active.";E(),x=C=!1,d=!0,void 0!==t.timeSlice&&O()},this.stop=function(e){e=e||function(){},d=!1,y({desiredSampRate:m,sampleRate:T,numberOfAudioChannels:h,internalInterleavedLength:l,leftBuffers:o,rightBuffers:1===h?[]:f,noWorker:t.noWorker},(function(t,view){n.blob=new Blob([view],{type:"audio/wav"}),n.buffer=new ArrayBuffer(view.buffer.byteLength),n.view=view,n.sampleRate=m||T,n.bufferSize=_,n.length=l,x=!1,e&&e(n.blob)}))},void 0===c.Storage&&(c.Storage={AudioContextConstructor:null,AudioContext:window.AudioContext||window.webkitAudioContext}),c.Storage.AudioContextConstructor&&"closed"!==c.Storage.AudioContextConstructor.state||(c.Storage.AudioContextConstructor=new c.Storage.AudioContext);var w=c.Storage.AudioContextConstructor,S=w.createMediaStreamSource(e),k=[0,256,512,1024,2048,4096,8192,16384],_=void 0===t.bufferSize?4096:t.bufferSize;if(-1===k.indexOf(_)&&(t.disableLogs||console.log("Legal values for buffer-size are "+JSON.stringify(k,null,"\t"))),w.createJavaScriptNode)r=w.createJavaScriptNode(_,h,h);else{if(!w.createScriptProcessor)throw"WebAudio API has no support on this browser.";r=w.createScriptProcessor(_,h,h)}S.connect(r),t.bufferSize||(_=r.bufferSize);var T=void 0!==t.sampleRate?t.sampleRate:w.sampleRate||44100;(T<22050||T>96e3)&&(t.disableLogs||console.log("sample-rate must be under range 22050 and 96000.")),t.disableLogs||t.desiredSampRate&&console.log("Desired sample-rate: "+t.desiredSampRate);var C=!1;function E(){o=[],f=[],l=0,x=!1,d=!1,C=!1,w=null,n.leftchannel=o,n.rightchannel=f,n.numberOfAudioChannels=h,n.desiredSampRate=m,n.sampleRate=T,n.recordingLength=l,L={left:[],right:[],recordingLength:0}}function A(){r&&(r.onaudioprocess=null,r.disconnect(),r=null),S&&(S.disconnect(),S=null),E()}this.pause=function(){C=!0},this.resume=function(){if(!1===v())throw"Please make sure MediaStream is active.";if(!d)return t.disableLogs||console.log("Seems recording has been restarted."),void this.record();C=!1},this.clearRecordedData=function(){t.checkForInactiveTracks=!1,d&&this.stop(A),A()},this.name="StereoAudioRecorder",this.toString=function(){return this.name};var x=!1;r.onaudioprocess=function(e){if(!C)if(!1===v()&&(t.disableLogs||console.log("MediaStream seems stopped."),r.disconnect(),d=!1),d){x||(x=!0,t.onAudioProcessStarted&&t.onAudioProcessStarted(),t.initCallback&&t.initCallback());var c=e.inputBuffer.getChannelData(0),m=new Float32Array(c);if(o.push(m),2===h){var y=e.inputBuffer.getChannelData(1),w=new Float32Array(y);f.push(w)}l+=_,n.recordingLength=l,void 0!==t.timeSlice&&(L.recordingLength+=_,L.left.push(m),2===h&&L.right.push(w))}else S&&(S.disconnect(),S=null)},w.createMediaStreamDestination?r.connect(w.createMediaStreamDestination()):r.connect(w.destination),this.leftchannel=o,this.rightchannel=f,this.numberOfAudioChannels=h,this.desiredSampRate=m,this.sampleRate=T,n.recordingLength=l;var L={left:[],right:[],recordingLength:0};function O(){d&&"function"==typeof t.ondataavailable&&void 0!==t.timeSlice&&(L.left.length?(y({desiredSampRate:m,sampleRate:T,numberOfAudioChannels:h,internalInterleavedLength:L.recordingLength,leftBuffers:L.left,rightBuffers:1===h?[]:L.right},(function(e,view){var r=new Blob([view],{type:"audio/wav"});t.ondataavailable(r),setTimeout(O,t.timeSlice)})),L={left:[],right:[],recordingLength:0}):setTimeout(O,t.timeSlice))}}function j(e,t){if("undefined"==typeof html2canvas)throw"Please link: https://www.webrtc-experiment.com/screenshot.js";(t=t||{}).frameInterval||(t.frameInterval=10);var r=!1;["captureStream","mozCaptureStream","webkitCaptureStream"].forEach((function(e){e in document.createElement("canvas")&&(r=!0)}));var n,o,c,f=!(!window.webkitRTCPeerConnection&&!window.webkitGetUserMedia||!window.chrome),d=50,l=navigator.userAgent.match(/Chrom(e|ium)\/([0-9]+)\./);if(f&&l&&l[2]&&(d=parseInt(l[2],10)),f&&d<52&&(r=!1),t.useWhammyRecorder&&(r=!1),r)if(t.disableLogs||console.log("Your browser supports both MediRecorder API and canvas.captureStream!"),e instanceof HTMLCanvasElement)n=e;else{if(!(e instanceof CanvasRenderingContext2D))throw"Please pass either HTMLCanvasElement or CanvasRenderingContext2D.";n=e.canvas}else navigator.mozGetUserMedia&&(t.disableLogs||console.error("Canvas recording is NOT supported in Firefox."));this.record=function(){if(c=!0,r&&!t.useWhammyRecorder){var e;"captureStream"in n?e=n.captureStream(25):"mozCaptureStream"in n?e=n.mozCaptureStream(25):"webkitCaptureStream"in n&&(e=n.webkitCaptureStream(25));try{var f=new E;f.addTrack(M(e,"video")[0]),e=f}catch(e){}if(!e)throw"captureStream API are NOT available.";(o=new D(e,{mimeType:t.mimeType||"video/webm"})).record()}else w.frames=[],y=(new Date).getTime(),v();t.initCallback&&t.initCallback()},this.getWebPImages=function(r){if("canvas"===e.nodeName.toLowerCase()){var n=w.frames.length;w.frames.forEach((function(e,r){var o=n-r;t.disableLogs||console.log(o+"/"+n+" frames remaining"),t.onEncodingCallback&&t.onEncodingCallback(o,n);var c=e.image.toDataURL("image/webp",1);w.frames[r].image=c})),t.disableLogs||console.log("Generating WebM"),r()}else r()},this.stop=function(e){c=!1;var n=this;r&&o?o.stop(e):this.getWebPImages((function(){w.compile((function(r){t.disableLogs||console.log("Recording finished!"),n.blob=r,n.blob.forEach&&(n.blob=new Blob([],{type:"video/webm"})),e&&e(n.blob),w.frames=[]}))}))};var h=!1;function m(){w.frames=[],c=!1,h=!1}function v(){if(h)return y=(new Date).getTime(),setTimeout(v,500);if("canvas"===e.nodeName.toLowerCase()){var r=(new Date).getTime()-y;return y=(new Date).getTime(),w.frames.push({image:(n=document.createElement("canvas"),o=n.getContext("2d"),n.width=e.width,n.height=e.height,o.drawImage(e,0,0),n),duration:r}),void(c&&setTimeout(v,t.frameInterval))}var n,o;html2canvas(e,{grabMouse:void 0===t.showMousePointer||t.showMousePointer,onrendered:function(canvas){var e=(new Date).getTime()-y;if(!e)return setTimeout(v,t.frameInterval);y=(new Date).getTime(),w.frames.push({image:canvas.toDataURL("image/webp",1),duration:e}),c&&setTimeout(v,t.frameInterval)}})}this.pause=function(){h=!0,o instanceof D&&o.pause()},this.resume=function(){h=!1,o instanceof D?o.resume():c||this.record()},this.clearRecordedData=function(){c&&this.stop(m),m()},this.name="CanvasRecorder",this.toString=function(){return this.name};var y=(new Date).getTime(),w=new F.Video(100)}function I(e,t){function r(e){e=void 0!==e?e:10;var t=(new Date).getTime()-d;return t?c?(d=(new Date).getTime(),setTimeout(r,100)):(d=(new Date).getTime(),video.paused&&video.play(),h.drawImage(video,0,0,canvas.width,canvas.height),l.frames.push({duration:t,image:canvas.toDataURL("image/webp")}),void(o||setTimeout(r,e,e))):setTimeout(r,e,e)}function n(e,t,r,n,o){var c=document.createElement("canvas");c.width=canvas.width,c.height=canvas.height;var f,i,d,l=c.getContext("2d"),h=[],m=-1===t,v=t&&t>0&&t<=e.length?t:e.length,y=0,w=0,R=0,S=Math.sqrt(Math.pow(255,2)+Math.pow(255,2)+Math.pow(255,2)),k=r&&r>=0&&r<=1?r:0,_=n&&n>=0&&n<=1?n:0,T=!1;i=-1,d=(f={length:v,functionToLoop:function(t,r){var n,o,c,f=function(){!T&&c-n<=c*_||(m&&(T=!0),h.push(e[r])),t()};if(T)f();else{var image=new Image;image.onload=function(){l.drawImage(image,0,0,canvas.width,canvas.height);var e=l.getImageData(0,0,canvas.width,canvas.height);n=0,o=e.data.length,c=e.data.length/4;for(var t=0;t<o;t+=4){var r={r:e.data[t],g:e.data[t+1],b:e.data[t+2]};Math.sqrt(Math.pow(r.r-y,2)+Math.pow(r.g-w,2)+Math.pow(r.b-R,2))<=S*k&&n++}f()},image.src=e[r].image}},callback:function(){(h=h.concat(e.slice(v))).length<=0&&h.push(e[e.length-1]),o(h)}}).length,function e(){++i!==d?setTimeout((function(){f.functionToLoop(e,i)}),1):f.callback()}()}(t=t||{}).frameInterval||(t.frameInterval=10),t.disableLogs||console.log("Using frames-interval:",t.frameInterval),this.record=function(){t.width||(t.width=320),t.height||(t.height=240),t.video||(t.video={width:t.width,height:t.height}),t.canvas||(t.canvas={width:t.width,height:t.height}),canvas.width=t.canvas.width||320,canvas.height=t.canvas.height||240,h=canvas.getContext("2d"),t.video&&t.video instanceof HTMLVideoElement?(video=t.video.cloneNode(),t.initCallback&&t.initCallback()):(video=document.createElement("video"),O(e,video),video.onloadedmetadata=function(){t.initCallback&&t.initCallback()},video.width=t.video.width,video.height=t.video.height),video.muted=!0,video.play(),d=(new Date).getTime(),l=new F.Video,t.disableLogs||(console.log("canvas resolutions",canvas.width,"*",canvas.height),console.log("video width/height",video.width||canvas.width,"*",video.height||canvas.height)),r(t.frameInterval)};var o=!1;this.stop=function(e){e=e||function(){},o=!0;var r=this;setTimeout((function(){n(l.frames,-1,null,null,(function(n){l.frames=n,t.advertisement&&t.advertisement.length&&(l.frames=t.advertisement.concat(l.frames)),l.compile((function(t){r.blob=t,r.blob.forEach&&(r.blob=new Blob([],{type:"video/webm"})),e&&e(r.blob)}))}))}),10)};var c=!1;function f(){l.frames=[],o=!0,c=!1}this.pause=function(){c=!0},this.resume=function(){c=!1,o&&this.record()},this.clearRecordedData=function(){o||this.stop(f),f()},this.name="WhammyRecorder",this.toString=function(){return this.name};var video,d,l,canvas=document.createElement("canvas"),h=canvas.getContext("2d")}void 0!==w?B.AudioContext=w:"undefined"!=typeof webkitAudioContext&&(B.AudioContext=webkitAudioContext),void 0!==c&&(c.Storage=B),void 0!==c&&(c.MediaStreamRecorder=D),void 0!==c&&(c.StereoAudioRecorder=P),void 0!==c&&(c.CanvasRecorder=j),void 0!==c&&(c.WhammyRecorder=I);var F=function(){function e(e){this.frames=[],this.duration=e||1,this.quality=.8}function t(e){function t(e,t,r){return[{data:e,id:231}].concat(r.map((function(e){var r=function(data){var e=0;data.keyframe&&(e|=128);data.invisible&&(e|=8);data.lacing&&(e|=data.lacing<<1);data.discardable&&(e|=1);if(data.trackNum>127)throw"TrackNumber > 127 not supported";return[128|data.trackNum,data.timecode>>8,255&data.timecode,e].map((function(e){return String.fromCharCode(e)})).join("")+data.frame}({discardable:0,frame:e.data.slice(4),invisible:0,keyframe:1,lacing:0,trackNum:1,timecode:Math.round(t)});return t+=e.duration,{data:r,id:163}})))}function r(e){for(var t=[];e>0;)t.push(255&e),e>>=8;return new Uint8Array(t.reverse())}function n(e){var data=[];e=(e.length%8?new Array(9-e.length%8).join("0"):"")+e;for(var i=0;i<e.length;i+=8)data.push(parseInt(e.substr(i,8),2));return new Uint8Array(data)}function o(e,t){return parseInt(e.substr(t+4,4).split("").map((function(i){var e=i.charCodeAt(0).toString(2);return new Array(8-e.length+1).join("0")+e})).join(""),2)}var c=new function(e){var o=function(e){if(!e[0])return void postMessage({error:"Something went wrong. Maybe WebP format is not supported in the current browser."});for(var t=e[0].width,r=e[0].height,n=e[0].duration,i=1;i<e.length;i++)n+=e[i].duration;return{duration:n,width:t,height:r}}(e);if(!o)return[];for(var c,f=[{id:440786851,data:[{data:1,id:17030},{data:1,id:17143},{data:4,id:17138},{data:8,id:17139},{data:"webm",id:17026},{data:2,id:17031},{data:2,id:17029}]},{id:408125543,data:[{id:357149030,data:[{data:1e6,id:2807729},{data:"whammy",id:19840},{data:"whammy",id:22337},{data:(c=o.duration,[].slice.call(new Uint8Array(new Float64Array([c]).buffer),0).map((function(e){return String.fromCharCode(e)})).reverse().join("")),id:17545}]},{id:374648427,data:[{id:174,data:[{data:1,id:215},{data:1,id:29637},{data:0,id:156},{data:"und",id:2274716},{data:"V_VP8",id:134},{data:"VP8",id:2459272},{data:1,id:131},{id:224,data:[{data:o.width,id:176},{data:o.height,id:186}]}]}]}]}],d=0,l=0;d<e.length;){var h=[],m=0;do{h.push(e[d]),m+=e[d].duration,d++}while(d<e.length&&m<3e4);var v={id:524531317,data:t(l,0,h)};f[1].data.push(v),l+=m}return function e(t){for(var o=[],i=0;i<t.length;i++){var data=t[i].data;"object"==typeof data&&(data=e(data)),"number"==typeof data&&(data=n(data.toString(2))),"string"==typeof data&&(data=new Uint8Array(data.split("").map((function(e){return e.charCodeAt(0)}))));var c=data.size||data.byteLength||data.length,f=Math.ceil(Math.ceil(Math.log(c)/Math.log(2))/8),d=c.toString(2),l=new Array(7*f+7+1-d.length).join("0")+d,h=new Array(f).join("0")+"1"+l;o.push(r(t[i].id)),o.push(n(h)),o.push(data)}return new Blob(o,{type:"video/webm"})}(f)}(e.map((function(e){var t=function(e){for(var t=e.RIFF[0].WEBP[0],r=t.indexOf("*"),i=0,n=[];i<4;i++)n[i]=t.charCodeAt(r+3+i);return{width:16383&(n[1]<<8|n[0]),height:16383&(n[3]<<8|n[2]),data:t,riff:e}}(function e(t){for(var r=0,n={};r<t.length;){var c=t.substr(r,4),f=o(t,r),data=t.substr(r+4+4,f);r+=8+f,n[c]=n[c]||[],"RIFF"===c||"LIST"===c?n[c].push(e(data)):n[c].push(data)}return n}(atob(e.image.slice(23))));return t.duration=e.duration,t})));postMessage(c)}return e.prototype.add=function(e,t){if("canvas"in e&&(e=e.canvas),"toDataURL"in e&&(e=e.toDataURL("image/webp",this.quality)),!/^data:image\/webp;base64,/gi.test(e))throw"Input must be formatted properly as a base64 encoded DataURI of type image/webp";this.frames.push({image:e,duration:t||this.duration})},e.prototype.compile=function(e){var r,n,o,c=(r=t,n=R.createObjectURL(new Blob([r.toString(),"this.onmessage =  function (eee) {"+r.name+"(eee.data);}"],{type:"application/javascript"})),o=new Worker(n),R.revokeObjectURL(n),o);c.onmessage=function(t){t.data.error?console.error(t.data.error):e(t.data)},c.postMessage(this.frames)},{Video:e}}();void 0!==c&&(c.Whammy=F);var N={init:function(){var e=this;if("undefined"!=typeof indexedDB&&void 0!==indexedDB.open){var t,r=this.dbName||location.href.replace(/\/|:|#|%|\.|\[|\]/g,""),n=indexedDB.open(r,1);n.onerror=e.onError,n.onsuccess=function(){((t=n.result).onerror=e.onError,t.setVersion)?1!==t.version?t.setVersion(1).onsuccess=function(){o(t),c()}:c():c()},n.onupgradeneeded=function(e){o(e.target.result)}}else console.error("IndexedDB API are not available in this browser.");function o(t){t.createObjectStore(e.dataStoreName)}function c(){var r=t.transaction([e.dataStoreName],"readwrite");function n(t){r.objectStore(e.dataStoreName).get(t).onsuccess=function(r){e.callback&&e.callback(r.target.result,t)}}e.videoBlob&&r.objectStore(e.dataStoreName).put(e.videoBlob,"videoBlob"),e.gifBlob&&r.objectStore(e.dataStoreName).put(e.gifBlob,"gifBlob"),e.audioBlob&&r.objectStore(e.dataStoreName).put(e.audioBlob,"audioBlob"),n("audioBlob"),n("videoBlob"),n("gifBlob")}},Fetch:function(e){return this.callback=e,this.init(),this},Store:function(e){return this.audioBlob=e.audioBlob,this.videoBlob=e.videoBlob,this.gifBlob=e.gifBlob,this.init(),this},onError:function(e){console.error(JSON.stringify(e,null,"\t"))},dataStoreName:"recordRTC",dbName:null};function z(e,t){if("undefined"==typeof GIFEncoder){var script=document.createElement("script");script.src="https://www.webrtc-experiment.com/gif-recorder.js",(document.body||document.documentElement).appendChild(script)}t=t||{};var r=e instanceof CanvasRenderingContext2D||e instanceof HTMLCanvasElement;this.record=function(){"undefined"!=typeof GIFEncoder&&c?(r||(t.width||(t.width=video.offsetWidth||320),t.height||(t.height=video.offsetHeight||240),t.video||(t.video={width:t.width,height:t.height}),t.canvas||(t.canvas={width:t.width,height:t.height}),canvas.width=t.canvas.width||320,canvas.height=t.canvas.height||240,video.width=t.video.width||320,video.height=t.video.height||240),(d=new GIFEncoder).setRepeat(0),d.setDelay(t.frameRate||200),d.setQuality(t.quality||10),d.start(),"function"==typeof t.onGifRecordingStarted&&t.onGifRecordingStarted(),Date.now(),l=m((function e(time){if(!0!==h.clearedRecordedData){if(n)return setTimeout((function(){e(time)}),100);l=m(e),void 0===typeof f&&(f=time),time-f<90||(!r&&video.paused&&video.play(),r||o.drawImage(video,0,0,canvas.width,canvas.height),t.onGifPreview&&t.onGifPreview(canvas.toDataURL("image/png")),d.addFrame(o),f=time)}})),t.initCallback&&t.initCallback()):setTimeout(h.record,1e3)},this.stop=function(e){e=e||function(){},l&&y(l),Date.now(),this.blob=new Blob([new Uint8Array(d.stream().bin)],{type:"image/gif"}),e(this.blob),d.stream().bin=[]};var n=!1;this.pause=function(){n=!0},this.resume=function(){n=!1},this.clearRecordedData=function(){h.clearedRecordedData=!0,d&&(d.stream().bin=[])},this.name="GifRecorder",this.toString=function(){return this.name};var canvas=document.createElement("canvas"),o=canvas.getContext("2d");r&&(e instanceof CanvasRenderingContext2D?canvas=(o=e).canvas:e instanceof HTMLCanvasElement&&(o=e.getContext("2d"),canvas=e));var c=!0;if(!r){var video=document.createElement("video");video.muted=!0,video.autoplay=!0,video.playsInline=!0,c=!1,video.onloadedmetadata=function(){c=!0},O(e,video),video.play()}var f,d,l=null,h=this}function W(e,t){!function(e){void 0===c&&e&&"undefined"==typeof window&&void 0!==r&&(r.navigator={userAgent:"Fake/5.0 (FakeOS) AppleWebKit/123 (KHTML, like Gecko) Fake/12.3.4567.89 Fake/123.45",getUserMedia:function(){}},r.console||(r.console={}),void 0!==r.console.log&&void 0!==r.console.error||(r.console.error=r.console.log=r.console.log||function(){console.log(arguments)}),"undefined"==typeof document&&(e.document={documentElement:{appendChild:function(){return""}}},document.createElement=document.captureStream=document.mozCaptureStream=function(){var e={getContext:function(){return e},play:function(){},pause:function(){},drawImage:function(){},toDataURL:function(){return""},style:{}};return e},e.HTMLVideoElement=function(){}),"undefined"==typeof location&&(e.location={protocol:"file:",href:"",hash:""}),"undefined"==typeof screen&&(e.screen={width:0,height:0}),void 0===h&&(e.URL={createObjectURL:function(){return""},revokeObjectURL:function(){return""}}),e.window=r)}(void 0!==r?r:null),t=t||"multi-streams-mixer";var n=[],o=!1,canvas=document.createElement("canvas"),f=canvas.getContext("2d");canvas.style.opacity=0,canvas.style.position="absolute",canvas.style.zIndex=-1,canvas.style.top="-1000em",canvas.style.left="-1000em",canvas.className=t,(document.body||document.documentElement).appendChild(canvas),this.disableLogs=!1,this.frameInterval=10,this.width=360,this.height=240,this.useGainNode=!0;var d=this,l=window.AudioContext;void 0===l&&("undefined"!=typeof webkitAudioContext&&(l=webkitAudioContext),"undefined"!=typeof mozAudioContext&&(l=mozAudioContext));var h=window.URL;void 0===h&&"undefined"!=typeof webkitURL&&(h=webkitURL),"undefined"!=typeof navigator&&void 0===navigator.getUserMedia&&(void 0!==navigator.webkitGetUserMedia&&(navigator.getUserMedia=navigator.webkitGetUserMedia),void 0!==navigator.mozGetUserMedia&&(navigator.getUserMedia=navigator.mozGetUserMedia));var m=window.MediaStream;void 0===m&&"undefined"!=typeof webkitMediaStream&&(m=webkitMediaStream),void 0!==m&&void 0===m.prototype.stop&&(m.prototype.stop=function(){this.getTracks().forEach((function(track){track.stop()}))});var v={};function y(){if(!o){var e=n.length,t=!1,r=[];if(n.forEach((function(video){video.stream||(video.stream={}),video.stream.fullcanvas?t=video:r.push(video)})),t)canvas.width=t.stream.width,canvas.height=t.stream.height;else if(r.length){canvas.width=e>1?2*r[0].width:r[0].width;var c=1;3!==e&&4!==e||(c=2),5!==e&&6!==e||(c=3),7!==e&&8!==e||(c=4),9!==e&&10!==e||(c=5),canvas.height=r[0].height*c}else canvas.width=d.width||360,canvas.height=d.height||240;t&&t instanceof HTMLVideoElement&&w(t),r.forEach((function(video,e){w(video,e)})),setTimeout(y,d.frameInterval)}}function w(video,e){if(!o){var t=0,r=0,n=video.width,c=video.height;1===e&&(t=video.width),2===e&&(r=video.height),3===e&&(t=video.width,r=video.height),4===e&&(r=2*video.height),5===e&&(t=video.width,r=2*video.height),6===e&&(r=3*video.height),7===e&&(t=video.width,r=3*video.height),void 0!==video.stream.left&&(t=video.stream.left),void 0!==video.stream.top&&(r=video.stream.top),void 0!==video.stream.width&&(n=video.stream.width),void 0!==video.stream.height&&(c=video.stream.height),f.drawImage(video,t,r,n,c),"function"==typeof video.stream.onRender&&video.stream.onRender(f,t,r,n,c,e)}}function R(e){var video=document.createElement("video");return function(e,element){"srcObject"in element?element.srcObject=e:"mozSrcObject"in element?element.mozSrcObject=e:element.srcObject=e}(e,video),video.className=t,video.muted=!0,video.volume=0,video.width=e.width||d.width||360,video.height=e.height||d.height||240,video.play(),video}function S(t){n=[],(t=t||e).forEach((function(e){if(e.getTracks().filter((function(e){return"video"===e.kind})).length){var video=R(e);video.stream=e,n.push(video)}}))}void 0!==l?v.AudioContext=l:"undefined"!=typeof webkitAudioContext&&(v.AudioContext=webkitAudioContext),this.startDrawingFrames=function(){y()},this.appendStreams=function(t){if(!t)throw"First parameter is required.";t instanceof Array||(t=[t]),t.forEach((function(t){var r=new m;if(t.getTracks().filter((function(e){return"video"===e.kind})).length){var video=R(t);video.stream=t,n.push(video),r.addTrack(t.getTracks().filter((function(e){return"video"===e.kind}))[0])}if(t.getTracks().filter((function(e){return"audio"===e.kind})).length){var o=d.audioContext.createMediaStreamSource(t);d.audioDestination=d.audioContext.createMediaStreamDestination(),o.connect(d.audioDestination),r.addTrack(d.audioDestination.stream.getTracks().filter((function(e){return"audio"===e.kind}))[0])}e.push(r)}))},this.releaseStreams=function(){n=[],o=!0,d.gainNode&&(d.gainNode.disconnect(),d.gainNode=null),d.audioSources.length&&(d.audioSources.forEach((function(source){source.disconnect()})),d.audioSources=[]),d.audioDestination&&(d.audioDestination.disconnect(),d.audioDestination=null),d.audioContext&&d.audioContext.close(),d.audioContext=null,f.clearRect(0,0,canvas.width,canvas.height),canvas.stream&&(canvas.stream.stop(),canvas.stream=null)},this.resetVideoStreams=function(e){!e||e instanceof Array||(e=[e]),S(e)},this.name="MultiStreamsMixer",this.toString=function(){return this.name},this.getMixedStream=function(){o=!1;var t=function(){var e;S(),"captureStream"in canvas?e=canvas.captureStream():"mozCaptureStream"in canvas?e=canvas.mozCaptureStream():d.disableLogs||console.error("Upgrade to latest Chrome or otherwise enable this flag: chrome://flags/#enable-experimental-web-platform-features");var t=new m;return e.getTracks().filter((function(e){return"video"===e.kind})).forEach((function(track){t.addTrack(track)})),canvas.stream=t,t}(),r=function(){v.AudioContextConstructor||(v.AudioContextConstructor=new v.AudioContext);d.audioContext=v.AudioContextConstructor,d.audioSources=[],!0===d.useGainNode&&(d.gainNode=d.audioContext.createGain(),d.gainNode.connect(d.audioContext.destination),d.gainNode.gain.value=0);var t=0;if(e.forEach((function(e){if(e.getTracks().filter((function(e){return"audio"===e.kind})).length){t++;var r=d.audioContext.createMediaStreamSource(e);!0===d.useGainNode&&r.connect(d.gainNode),d.audioSources.push(r)}})),!t)return;return d.audioDestination=d.audioContext.createMediaStreamDestination(),d.audioSources.forEach((function(e){e.connect(d.audioDestination)})),d.audioDestination.stream}();return r&&r.getTracks().filter((function(e){return"audio"===e.kind})).forEach((function(track){t.addTrack(track)})),e.forEach((function(e){e.fullcanvas&&!0})),t}}function Y(e,t){e=e||[];var r,n,o=this;(t=t||{elementClass:"multi-streams-mixer",mimeType:"video/webm",video:{width:360,height:240}}).frameInterval||(t.frameInterval=10),t.video||(t.video={}),t.video.width||(t.video.width=360),t.video.height||(t.video.height=240),this.record=function(){var o;r=new W(e,t.elementClass||"multi-streams-mixer"),(o=[],e.forEach((function(e){M(e,"video").forEach((function(track){o.push(track)}))})),o).length&&(r.frameInterval=t.frameInterval||10,r.width=t.video.width||360,r.height=t.video.height||240,r.startDrawingFrames()),t.previewStream&&"function"==typeof t.previewStream&&t.previewStream(r.getMixedStream()),(n=new D(r.getMixedStream(),t)).record()},this.stop=function(e){n&&n.stop((function(t){o.blob=t,e(t),o.clearRecordedData()}))},this.pause=function(){n&&n.pause()},this.resume=function(){n&&n.resume()},this.clearRecordedData=function(){n&&(n.clearRecordedData(),n=null),r&&(r.releaseStreams(),r=null)},this.addStreams=function(o){if(!o)throw"First parameter is required.";o instanceof Array||(o=[o]),e.concat(o),n&&r&&(r.appendStreams(o),t.previewStream&&"function"==typeof t.previewStream&&t.previewStream(r.getMixedStream()))},this.resetVideoStreams=function(e){r&&(!e||e instanceof Array||(e=[e]),r.resetVideoStreams(e))},this.getMixer=function(){return r},this.name="MultiStreamRecorder",this.toString=function(){return this.name}}function V(e,t){var r,n,o;function c(){return new ReadableStream({start:function(n){var o=document.createElement("canvas"),video=document.createElement("video"),c=!0;video.srcObject=e,video.muted=!0,video.height=t.height,video.width=t.width,video.volume=0,video.onplaying=function(){o.width=t.width,o.height=t.height;var e=o.getContext("2d"),f=1e3/t.frameRate,d=setInterval((function(){if(r&&(clearInterval(d),n.close()),c&&(c=!1,t.onVideoProcessStarted&&t.onVideoProcessStarted()),e.drawImage(video,0,0),"closed"!==n._controlledReadableStream.state)try{n.enqueue(e.getImageData(0,0,t.width,t.height))}catch(e){}}),f)},video.play()}})}"undefined"!=typeof ReadableStream&&"undefined"!=typeof WritableStream||console.error("Following polyfill is strongly recommended: https://unpkg.com/@mattiasbuelens/web-streams-polyfill/dist/polyfill.min.js"),(t=t||{}).width=t.width||640,t.height=t.height||480,t.frameRate=t.frameRate||30,t.bitrate=t.bitrate||1200,t.realtime=t.realtime||!0,this.record=function(){f=[],o=!1,this.blob=null,function e(d,l){if(!t.workerPath&&!l)return r=!1,void fetch("https://unpkg.com/webm-wasm@latest/dist/webm-worker.js").then((function(t){t.arrayBuffer().then((function(t){e(d,t)}))}));if(!t.workerPath&&l instanceof ArrayBuffer){var h=new Blob([l],{type:"text/javascript"});t.workerPath=R.createObjectURL(h)}t.workerPath||console.error("workerPath parameter is missing."),(n=new Worker(t.workerPath)).postMessage(t.webAssemblyPath||"https://unpkg.com/webm-wasm@latest/dist/webm-wasm.wasm"),n.addEventListener("message",(function(e){"READY"===e.data?(n.postMessage({width:t.width,height:t.height,bitrate:t.bitrate||1200,timebaseDen:t.frameRate||30,realtime:t.realtime}),c().pipeTo(new WritableStream({write:function(image){r?console.error("Got image, but recorder is finished!"):n.postMessage(image.data.buffer,[image.data.buffer])}}))):e.data&&(o||f.push(e.data))}))}(e),"function"==typeof t.initCallback&&t.initCallback()},this.pause=function(){o=!0},this.resume=function(){o=!1};var f=[];this.stop=function(e){r=!0;var t=this;!function(e){n?(n.addEventListener("message",(function(t){null===t.data&&(n.terminate(),n=null,e&&e())})),n.postMessage(null)):e&&e()}((function(){t.blob=new Blob(f,{type:"video/webm"}),e(t.blob)}))},this.name="WebAssemblyRecorder",this.toString=function(){return this.name},this.clearRecordedData=function(){f=[],o=!1,this.blob=null},this.blob=null}void 0!==c&&(c.DiskStorage=N),void 0!==c&&(c.GifRecorder=z),void 0===c&&(e.exports=W,void 0===(o=function(){return W}.apply(t,[]))||(e.exports=o)),void 0!==c&&(c.MultiStreamRecorder=Y),void 0!==c&&(c.RecordRTCPromisesHandler=function(e,t){if(!this)throw'Use "new RecordRTCPromisesHandler()"';if(void 0===e)throw'First argument "MediaStream" is required.';var r=this;r.recordRTC=new c(e,t),this.startRecording=function(){return new Promise((function(e,t){try{r.recordRTC.startRecording(),e()}catch(e){t(e)}}))},this.stopRecording=function(){return new Promise((function(e,t){try{r.recordRTC.stopRecording((function(n){r.blob=r.recordRTC.getBlob(),r.blob&&r.blob.size?e(n):t("Empty blob.",r.blob)}))}catch(e){t(e)}}))},this.pauseRecording=function(){return new Promise((function(e,t){try{r.recordRTC.pauseRecording(),e()}catch(e){t(e)}}))},this.resumeRecording=function(){return new Promise((function(e,t){try{r.recordRTC.resumeRecording(),e()}catch(e){t(e)}}))},this.getDataURL=function(e){return new Promise((function(e,t){try{r.recordRTC.getDataURL((function(t){e(t)}))}catch(e){t(e)}}))},this.getBlob=function(){return new Promise((function(e,t){try{e(r.recordRTC.getBlob())}catch(e){t(e)}}))},this.getInternalRecorder=function(){return new Promise((function(e,t){try{e(r.recordRTC.getInternalRecorder())}catch(e){t(e)}}))},this.reset=function(){return new Promise((function(e,t){try{e(r.recordRTC.reset())}catch(e){t(e)}}))},this.destroy=function(){return new Promise((function(e,t){try{e(r.recordRTC.destroy())}catch(e){t(e)}}))},this.getState=function(){return new Promise((function(e,t){try{e(r.recordRTC.getState())}catch(e){t(e)}}))},this.blob=null,this.version="5.6.1"}),void 0!==c&&(c.WebAssemblyRecorder=V)}).call(this,r(35),r(89))},254:function(e,t,r){e.exports=r(255)},255:function(e,t,r){(function(n){var o=r(258),c=r(233),f=r(275);(t=e.exports=function(e,r){null==(r=r||{}).forceBase64&&(r.forceBase64=t.forceBase64);e._streamSocket||(e._streamSocket=new o(e,r));return e._streamSocket}).Buffer=n,t.Socket=o,t.IOStream=c,t.forceBase64=!1,t.createStream=function(e){return new c(e)},t.createBlobReadStream=function(e,t){return new f(e,t)}}).call(this,r(226).Buffer)},256:function(e,t,r){"use strict";t.byteLength=function(e){var t=d(e),r=t[0],n=t[1];return 3*(r+n)/4-n},t.toByteArray=function(e){var t,i,r=d(e),n=r[0],f=r[1],l=new c(function(e,t,r){return 3*(t+r)/4-r}(0,n,f)),h=0,m=f>0?n-4:n;for(i=0;i<m;i+=4)t=o[e.charCodeAt(i)]<<18|o[e.charCodeAt(i+1)]<<12|o[e.charCodeAt(i+2)]<<6|o[e.charCodeAt(i+3)],l[h++]=t>>16&255,l[h++]=t>>8&255,l[h++]=255&t;2===f&&(t=o[e.charCodeAt(i)]<<2|o[e.charCodeAt(i+1)]>>4,l[h++]=255&t);1===f&&(t=o[e.charCodeAt(i)]<<10|o[e.charCodeAt(i+1)]<<4|o[e.charCodeAt(i+2)]>>2,l[h++]=t>>8&255,l[h++]=255&t);return l},t.fromByteArray=function(e){for(var t,r=e.length,o=r%3,c=[],i=0,f=r-o;i<f;i+=16383)c.push(l(e,i,i+16383>f?f:i+16383));1===o?(t=e[r-1],c.push(n[t>>2]+n[t<<4&63]+"==")):2===o&&(t=(e[r-2]<<8)+e[r-1],c.push(n[t>>10]+n[t>>4&63]+n[t<<2&63]+"="));return c.join("")};for(var n=[],o=[],c="undefined"!=typeof Uint8Array?Uint8Array:Array,code="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0,f=code.length;i<f;++i)n[i]=code[i],o[code.charCodeAt(i)]=i;function d(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");return-1===r&&(r=t),[r,r===t?0:4-r%4]}function l(e,t,r){for(var o,c,output=[],i=t;i<r;i+=3)o=(e[i]<<16&16711680)+(e[i+1]<<8&65280)+(255&e[i+2]),output.push(n[(c=o)>>18&63]+n[c>>12&63]+n[c>>6&63]+n[63&c]);return output.join("")}o["-".charCodeAt(0)]=62,o["_".charCodeAt(0)]=63},257:function(e,t){t.read=function(e,t,r,n,o){var c,f,d=8*o-n-1,l=(1<<d)-1,h=l>>1,m=-7,i=r?o-1:0,v=r?-1:1,s=e[t+i];for(i+=v,c=s&(1<<-m)-1,s>>=-m,m+=d;m>0;c=256*c+e[t+i],i+=v,m-=8);for(f=c&(1<<-m)-1,c>>=-m,m+=n;m>0;f=256*f+e[t+i],i+=v,m-=8);if(0===c)c=1-h;else{if(c===l)return f?NaN:1/0*(s?-1:1);f+=Math.pow(2,n),c-=h}return(s?-1:1)*f*Math.pow(2,c-n)},t.write=function(e,t,r,n,o,c){var f,d,l,h=8*c-o-1,m=(1<<h)-1,v=m>>1,rt=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,i=n?0:c-1,y=n?1:-1,s=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(d=isNaN(t)?1:0,f=m):(f=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-f))<1&&(f--,l*=2),(t+=f+v>=1?rt/l:rt*Math.pow(2,1-v))*l>=2&&(f++,l/=2),f+v>=m?(d=0,f=m):f+v>=1?(d=(t*l-1)*Math.pow(2,o),f+=v):(d=t*Math.pow(2,v-1)*Math.pow(2,o),f=0));o>=8;e[r+i]=255&d,i+=y,d/=256,o-=8);for(f=f<<o|d,h+=o;h>0;e[r+i]=255&f,i+=y,f/=256,h-=8);e[r+i-y]|=128*s}},258:function(e,t,r){(function(n,o){var c=r(230),f=r(228).EventEmitter,d=r(232),l=(r(233),r(274)),h=r(248)("socket.io-stream:socket"),m=f.prototype.emit,v=f.prototype.on,y=Array.prototype.slice;function w(e,r){if(!(this instanceof w))return new w(e,r);f.call(this),r=r||{},this.sio=e,this.forceBase64=!!r.forceBase64,this.streams={},this.encoder=new l.Encoder,this.decoder=new l.Decoder;var n=t.event;e.on(n,d(this,m)),e.on(n+"-read",d(this,"_onread")),e.on(n+"-write",d(this,"_onwrite")),e.on(n+"-end",d(this,"_onend")),e.on(n+"-error",d(this,"_onerror")),e.on("error",d(this,m,"error")),e.on("disconnect",d(this,"_ondisconnect")),this.encoder.on("stream",d(this,"_onencode")),this.decoder.on("stream",d(this,"_ondecode"))}(t=e.exports=w).event="$stream",t.events=["error","newListener","removeListener"],c.inherits(w,f),w.prototype.$emit=m,w.prototype.emit=function(e){return~t.events.indexOf(e)?m.apply(this,arguments):(this._stream.apply(this,arguments),this)},w.prototype.on=function(e,r){return~t.events.indexOf(e)?v.apply(this,arguments):(this._onstream(e,r),this)},w.prototype._stream=function(e){h("sending new streams");var r=this,n=y.call(arguments,1),o=n[n.length-1];"function"==typeof o&&(n[n.length-1]=function(){var e=y.call(arguments);e=r.decoder.decode(e),o.apply(this,e)}),n=this.encoder.encode(n);var c=this.sio;c.emit.apply(c,[t.event,e].concat(n))},w.prototype._read=function(e,r){this.sio.emit(t.event+"-read",e,r)},w.prototype._write=function(e,r,c,f){n.isBuffer(r)&&(this.forceBase64?(c="base64",r=r.toString(c)):o.Buffer||(r=r.toArrayBuffer?r.toArrayBuffer():r.buffer)),this.sio.emit(t.event+"-write",e,r,c,f)},w.prototype._end=function(e){this.sio.emit(t.event+"-end",e)},w.prototype._error=function(e,r){this.sio.emit(t.event+"-error",e,r.message||r)},w.prototype._onstream=function(e,t){if("function"!=typeof t)throw TypeError("listener must be a function");function r(){h("new streams");var e=this,r=y.call(arguments),n=r[r.length-1];"function"==typeof n&&(r[r.length-1]=function(){var t=y.call(arguments);t=e.encoder.encode(t),n.apply(this,t)}),r=this.decoder.decode(r),t.apply(this,r)}r.listener=t,v.call(this,e,r)},w.prototype._onread=function(e,t){h('read: "%s"',e);var r=this.streams[e];r?r._onread(t):h("ignore invalid stream id")},w.prototype._onwrite=function(e,t,r,c){h('write: "%s"',e);var f=this.streams[e];f?(o.ArrayBuffer&&t instanceof ArrayBuffer&&(t=new n(new Uint8Array(t))),f._onwrite(t,r,c)):c("invalid stream id: "+e)},w.prototype._onend=function(e){h('end: "%s"',e);var t=this.streams[e];t?t._end():h('ignore non-existent stream id: "%s"',e)},w.prototype._onerror=function(e,t){h('error: "%s", "%s"',e,t);var r=this.streams[e];if(r){var n=new Error(t);n.remote=!0,r.emit("error",n)}else h('invalid stream id: "%s"',e)},w.prototype._ondisconnect=function(){var e;for(var t in this.streams)(e=this.streams[t]).destroy(),e.emit("close"),e.emit("error",new Error("Connection aborted"))},w.prototype._onencode=function(e){if(e.socket||e.destroyed)throw new Error("stream has already been sent.");var t=e.id;if(this.streams[t])throw new Error("Encoded stream already exists: "+t);this.streams[t]=e,e.socket=this},w.prototype._ondecode=function(e){var t=e.id;this.streams[t]?this._error(t,new Error("Decoded stream already exists: "+t)):(this.streams[t]=e,e.socket=this)},w.prototype.cleanup=function(e){delete this.streams[e]}}).call(this,r(226).Buffer,r(35))},259:function(e,t){e.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},260:function(e,t){"function"==typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}},261:function(e,t){},262:function(e,t,r){"use strict";var n=r(235).Buffer,o=r(263);e.exports=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.head=null,this.tail=null,this.length=0}return e.prototype.push=function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length},e.prototype.unshift=function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length},e.prototype.shift=function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}},e.prototype.clear=function(){this.head=this.tail=null,this.length=0},e.prototype.join=function(s){if(0===this.length)return"";for(var p=this.head,e=""+p.data;p=p.next;)e+=s+p.data;return e},e.prototype.concat=function(e){if(0===this.length)return n.alloc(0);if(1===this.length)return this.head.data;for(var t,r,o,c=n.allocUnsafe(e>>>0),p=this.head,i=0;p;)t=p.data,r=c,o=i,t.copy(r,o),i+=p.data.length,p=p.next;return c},e}(),o&&o.inspect&&o.inspect.custom&&(e.exports.prototype[o.inspect.custom]=function(){var e=o.inspect({length:this.length});return this.constructor.name+" "+e})},263:function(e,t){},264:function(e,t,r){(function(t){function r(e){try{if(!t.localStorage)return!1}catch(e){return!1}var r=t.localStorage[e];return null!=r&&"true"===String(r).toLowerCase()}e.exports=function(e,t){if(r("noDeprecation"))return e;var n=!1;return function(){if(!n){if(r("throwDeprecation"))throw new Error(t);r("traceDeprecation")?console.trace(t):console.warn(t),n=!0}return e.apply(this,arguments)}}}).call(this,r(35))},265:function(e,t,r){var n=r(226),o=n.Buffer;function c(e,t){for(var r in e)t[r]=e[r]}function f(e,t,r){return o(e,t,r)}o.from&&o.alloc&&o.allocUnsafe&&o.allocUnsafeSlow?e.exports=n:(c(n,t),t.Buffer=f),f.prototype=Object.create(o.prototype),c(o,f),f.from=function(e,t,r){if("number"==typeof e)throw new TypeError("Argument must not be a number");return o(e,t,r)},f.alloc=function(e,t,r){if("number"!=typeof e)throw new TypeError("Argument must be a number");var n=o(e);return void 0!==t?"string"==typeof r?n.fill(t,r):n.fill(t):n.fill(0),n},f.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return o(e)},f.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return n.SlowBuffer(e)}},266:function(e,t,r){"use strict";e.exports=c;var n=r(247),o=Object.create(r(229));function c(e){if(!(this instanceof c))return new c(e);n.call(this,e)}o.inherits=r(227),o.inherits(c,n),c.prototype._transform=function(e,t,r){r(null,e)}},267:function(e,t,r){e.exports=r(236)},268:function(e,t,r){e.exports=r(225)},269:function(e,t,r){e.exports=r(234).Transform},270:function(e,t,r){e.exports=r(234).PassThrough},271:function(e,t){e.exports=function b(a){return a?(a^16*Math.random()>>a/4).toString(16):([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,b)}},272:function(e,t,r){(t=e.exports=function(e){function r(){}function o(){var e=o,r=+new Date,f=r-(n||r);e.diff=f,e.prev=n,e.curr=r,n=r,null==e.useColors&&(e.useColors=t.useColors()),null==e.color&&e.useColors&&(e.color=c());var d=Array.prototype.slice.call(arguments);d[0]=t.coerce(d[0]),"string"!=typeof d[0]&&(d=["%o"].concat(d));var l=0;d[0]=d[0].replace(/%([a-z%])/g,(function(r,n){if("%%"===r)return r;l++;var o=t.formatters[n];if("function"==typeof o){var c=d[l];r=o.call(e,c),d.splice(l,1),l--}return r})),"function"==typeof t.formatArgs&&(d=t.formatArgs.apply(e,d));var h=o.log||t.log||console.log.bind(console);h.apply(e,d)}r.enabled=!1,o.enabled=!0;var f=t.enabled(e)?o:r;return f.namespace=e,f}).coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){t.enable("")},t.enable=function(e){t.save(e);for(var r=(e||"").split(/[\s,]+/),n=r.length,i=0;i<n;i++)r[i]&&("-"===(e=r[i].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")))},t.enabled=function(e){var i,r;for(i=0,r=t.skips.length;i<r;i++)if(t.skips[i].test(e))return!1;for(i=0,r=t.names.length;i<r;i++)if(t.names[i].test(e))return!0;return!1},t.humanize=r(273),t.names=[],t.skips=[],t.formatters={};var n,o=0;function c(){return t.colors[o++%t.colors.length]}},273:function(e,t){var s=1e3,r=6e4,n=60*r,o=24*n;function c(e,t,r){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+r:Math.ceil(e/t)+" "+r+"s"}e.exports=function(e,t){return t=t||{},"string"==typeof e?function(e){if((e=""+e).length>1e4)return;var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(!t)return;var c=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*c;case"days":case"day":case"d":return c*o;case"hours":case"hour":case"hrs":case"hr":case"h":return c*n;case"minutes":case"minute":case"mins":case"min":case"m":return c*r;case"seconds":case"second":case"secs":case"sec":case"s":return c*s;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return c}}(e):t.long?c(f=e,o,"day")||c(f,n,"hour")||c(f,r,"minute")||c(f,s,"second")||f+" ms":function(e){return e>=o?Math.round(e/o)+"d":e>=n?Math.round(e/n)+"h":e>=r?Math.round(e/r)+"m":e>=s?Math.round(e/s)+"s":e+"ms"}(e);var f}},274:function(e,t,r){var n=r(230),o=r(228).EventEmitter,c=r(233);Array.prototype.slice;function f(){o.call(this)}function d(){o.call(this)}t.Encoder=f,t.Decoder=d,n.inherits(f,o),f.prototype.encode=function(e){return e instanceof c?this.encodeStream(e):n.isArray(e)?this.encodeArray(e):e&&"object"==typeof e?this.encodeObject(e):e},f.prototype.encodeStream=function(e){this.emit("stream",e);var t={$stream:e.id};return e.options&&(t.options=e.options),t},f.prototype.encodeArray=function(e){for(var t=[],i=0,r=e.length;i<r;i++)t.push(this.encode(e[i]));return t},f.prototype.encodeObject=function(e){var t={};for(var r in e)e.hasOwnProperty(r)&&(t[r]=this.encode(e[r]));return t},n.inherits(d,o),d.prototype.decode=function(e){return e&&e.$stream?this.decodeStream(e):n.isArray(e)?this.decodeArray(e):e&&"object"==typeof e?this.decodeObject(e):e},d.prototype.decodeStream=function(e){var t=new c(e.options);return t.id=e.$stream,this.emit("stream",t),t},d.prototype.decodeArray=function(e){for(var t=[],i=0,r=e.length;i<r;i++)t.push(this.decode(e[i]));return t},d.prototype.decodeObject=function(e){var t={};for(var r in e)e.hasOwnProperty(r)&&(t[r]=this.decode(e[r]));return t}},275:function(e,t,r){(function(t){var n=r(230),o=r(242).Readable,c=r(232);function f(e,t){if(!(this instanceof f))return new f(e,t);var r;o.call(this,t),t=t||{},this.blob=e,this.slice=e.slice||e.webkitSlice||e.mozSlice,this.start=0,this.sync=t.synchronous||!1,(r=t.synchronous?this.fileReader=new FileReaderSync:this.fileReader=new FileReader).onload=c(this,"_onload"),r.onerror=c(this,"_onerror")}e.exports=f,n.inherits(f,o),f.prototype._read=function(e){var r=this.start,n=this.start=this.start+e,o=this.slice.call(this.blob,r,n);if(o.size)if(this.sync){var c=new t(new Uint8Array(this.fileReader.readAsArrayBuffer(o)));this.push(c)}else this.fileReader.readAsArrayBuffer(o);else this.push(null)},f.prototype._onload=function(e){var r=new t(new Uint8Array(e.target.result));this.push(r)},f.prototype._onerror=function(e){var t=e.target.error;this.emit("error",t)}}).call(this,r(226).Buffer)},276:function(e,t,r){"use strict";var n=r(237);r.n(n).a},277:function(e,t,r){(t=r(58)(!1)).push([e.i,".meeting-link[data-v-20fed338]{margin:10px 0}.video-item[data-v-20fed338]{border:1px solid #fff;height:300px}.video-header[data-v-20fed338]{margin-bottom:-25px!important;background:rgba(0,0,0,.2);color:#fff;padding-left:4px;width:10%;z-index:1000;position:relative}video[data-v-20fed338]{background:#000;width:100%}",""]),e.exports=t},280:function(e,t,r){"use strict";r.r(t);r(5),r(2),r(249);var n=r(0),o=(r(54),r(17)),c=(r(3),r(1),r(4),r(253),r(254)),f=r.n(c);function d(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}function l(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?d(Object(source),!0).forEach((function(t){Object(n.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):d(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var h={data:function(){return{localStream:null,peers:{},micOn:!1,videoOn:!0,constraints:{video:!0,audio:!0},audioContext:null,scriptNode:null,sStream:null,captions:"",RTCconfig:{offerToReceiveAudio:!0,offerToReceiveVideo:!0,iceServers:[{urls:"stun:stun.l.google.com:19302"}]}}},computed:{video_tracks:function(){return this.localStream.getVideoTracks()},audio_tracks:function(){return this.localStream.getAudioTracks()},peerRefs:function(){return Object.keys(this.peers).forEach((function(e){return"video-".concat(e)}))}},watch:{micOn:function(){this.micOn?this.scriptNode.connect(this.audioContext.destination):this.scriptNode.disconnect(this.audioContext.destination)}},beforeDestroy:function(){this.localStream.getTracks().forEach((function(track){return track.stop()})),this.peers={}},methods:{subscribeRTCListeners:function(){this.sockets.listener.subscribe("addPeer",this.addPeer),this.sockets.listener.subscribe("addICECandidate",this.addICECandidate),this.sockets.listener.subscribe("peerOffer",this.onPeerOffer),this.sockets.listener.subscribe("peerAnswer",this.onPeerAnswer),this.sockets.listener.subscribe("transcriptionData",this.receiveTranscription),this.sockets.listener.subscribe("removePeer",this.removePeer)},getUserMedia:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!("mediaDevices"in navigator)){t.next=13;break}return t.prev=1,t.next=4,navigator.mediaDevices.getUserMedia(e.constraints);case 4:r=t.sent,e.addLocalStream(r),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),console.log("Couldn't get user media:\n",t.t0);case 11:t.next=14;break;case 13:console.log("This browser does not support the 'getUserMedia' API");case 14:case"end":return t.stop()}}),t,null,[[1,8]])})))()},addLocalStream:function(e){var t=this;this.$nextTick((function(){t.$refs.localVideo.srcObject=e})),this.localStream=e,this.audio_tracks[0].enabled=!1,this.setupRecorder()},addRemoteStream:function(e){var t=this;return function(r){t.peers[e].stream=r.streams[0]}},addPeer:function(e){var t=this;return Object(o.a)(regeneratorRuntime.mark((function r(){var o,c,f,d,h;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(o=e.peer,c=e.shouldCreateOffer,f=void 0!==c&&c,d=o.socketId,!t.peers[d]){r.next=5;break}return console.log("Already connected to peer"),r.abrupt("return");case 5:if(h=new RTCPeerConnection(t.RTCconfig),t.peers=l(l({},t.peers),{},Object(n.a)({},d,l(l({peerConnection:h},o),{},{stream:null}))),h.onicecandidate=t.onICECandidate(d),h.ontrack=t.addRemoteStream(d),h.oniceconnectionstatechange=t.checkPeerConnection(d),t.localStream.getTracks().forEach((function(track){h.addTrack(track,t.localStream)})),!f){r.next=14;break}return r.next=14,t.createOffer(h,d);case 14:case"end":return r.stop()}}),r)})))()},createOffer:function(e,t){var r=this;return Object(o.a)(regeneratorRuntime.mark((function n(){var o;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.createOffer();case 2:return o=n.sent,n.next=5,e.setLocalDescription(o);case 5:r.$socket.emit("offer",o,t);case 6:case"end":return n.stop()}}),n)})))()},onPeerOffer:function(e){var t=this,r=e.caller,n=e.description,c=this.peers[r].peerConnection,f=new RTCSessionDescription(n);c.setRemoteDescription(f).then((function(){c.createAnswer().then(function(){var e=Object(o.a)(regeneratorRuntime.mark((function e(n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.setLocalDescription(n);case 2:t.$socket.emit("answer",n,r);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}))},onPeerAnswer:function(e){var t=e.recipient,r=e.description,n=this.peers[t].peerConnection,o=new RTCSessionDescription(r);n.setRemoteDescription(o)},onICECandidate:function(e){var t=this;return function(r){r.candidate&&t.$socket.emit("iceCandidate",{socketId:e,iceCandidate:l({},r.candidate)})}},addICECandidate:function(e){var t=e.iceCandidate,r=e.socketId;this.peers[r].peerConnection.addIceCandidate(new RTCIceCandidate(t))},setupRecorder:function(){var e=this;this.sStream=f.a.createStream(),f()(this.$socket).emit("speechStream",this.sStream,this.roomId);var t=new MediaStream(this.audio_tracks),input=this.audioContext.createMediaStreamSource(t),r=this.audioContext.createScriptProcessor(2048,1,1);this.scriptNode=r,r.onaudioprocess=function(t){for(var r=t.inputBuffer,n=t.outputBuffer,o=r.getChannelData(0),c=n.getChannelData(0),d=0;d<r.length;d++)c[d]=o[d];var l=new f.a.Buffer(e.ssBuffer(o,44100,16e3));e.sStream.write(l)},input.connect(r),this.scriptNode=r},ssBuffer:function(e,t,r){if(r==t)return e;if(r>t)throw"downsampling rate should be smaller than original sample rate";for(var n=t/r,o=Math.round(e.length/n),c=new Int16Array(o),f=0,d=0;f<c.length;){for(var l=Math.round((f+1)*n),h=0,m=0,i=d;i<l&&i<e.length;i++)h+=e[i],m++;c[f]=32767*Math.min(1,h/m),f++,d=l}return c.buffer},receiveTranscription:function(e){console.log("transcription",e),this.captions=e},removePeer:function(e){var t=l({},this.peers);delete t[e],this.peers=t},checkPeerConnection:function(e){var t=this;return function(r){var n=t.peers[e].peerConnection.iceConnectionState;"failed"!==n&&"closed"!==n&&"disconnected"!==n||t.removePeer(e)}},toggleVideo:function(){this.video_tracks[0].enabled=!this.video_tracks[0].enabled,this.videoOn=this.video_tracks[0].enabled},toggleMic:function(){this.audio_tracks[0].enabled=!this.audio_tracks[0].enabled,this.micOn=this.audio_tracks[0].enabled}},mounted:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.subscribeRTCListeners(),e.audioContext=new(window.AudioContext||window.webkitAudioContext);case 2:case"end":return t.stop()}}),t)})))()}},m={name:"chat-room",mixins:[r(111).a,h],data:function(){return{roomId:null,room:{},currentUser:null,meetingFull:!1,sharableLink:null}},methods:{subscribeListeners:function(){this.sockets.listener.subscribe("roomJoined",this.onRoomJoined),this.sockets.listener.subscribe("meetingFull",this.onMeetingFull)},onRoomJoined:function(data){var e=this,t=data.room,r=data.users,n=data.currentUser;(this.room=t,this.currentUser=n,r.length>1)&&r.filter((function(e){return e.socketId!==n.socketId})).forEach((function(t){e.addPeer({peer:t})}))},onMeetingFull:function(){this.onMeetingFull=!0},joinRoom:function(e){this.$socket.emit("joinRoom",this.roomId,e)},exitRoom:function(){this.peers={},this.$socket.emit("exitRoom",this.roomId,this.currentUser.socketId),this.$router.push({name:"rooms"})}},mounted:function(){var e=this;this.subscribeListeners(),this.roomId=this.$route.params.roomId,this.sharableLink="".concat(window.location.origin).concat(this.$route.fullPath);var t={username:this.user?this.user.username:null};this.getUserMedia().then((function(){e.joinRoom(t)}))}},v=(r(276),r(33)),component=Object(v.a)(m,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("b-container",{staticClass:"meeting-room"},[e.meetingFull?r("b-container",{attrs:{fluid:""}},[r("b-jumbotron",{attrs:{header:"Meeting Full"}},[r("p",[e._v("Sorry. This meeting can only have a maximum of 4 participants")])])],1):e._e(),e._v(" "),r("b-container",{directives:[{name:"show",rawName:"v-show",value:e.room,expression:"room"}],attrs:{fluid:""}},[r("b-container",{staticClass:"meeting-link",attrs:{fluid:""}},[e._v("\n      Sharable Meeting Link: "),r("em",[e._v(e._s(e.sharableLink))])]),e._v(" "),r("b-container",{attrs:{fluid:""}},[r("b-row",[r("b-col",{staticClass:"video-item",attrs:{cols:"6",id:"local-video"}},[e.currentUser?r("p",{staticClass:"video-header"},[e._v(e._s(e.currentUser.username||"---"))]):e._e(),e._v(" "),r("video",{ref:"localVideo",attrs:{autoplay:"",playsinline:""}})]),e._v(" "),e._l(Object.keys(e.peers),(function(t){return r("b-col",{key:e.peers[t].socketId,staticClass:"video-item",attrs:{cols:"6"}},[r("p",{staticClass:"video-header"},[e._v(e._s(e.peers[t].username||"---"))]),e._v(" "),r("video",{ref:"`video-${peer}`",refInFor:!0,staticClass:"remote-video",attrs:{autoplay:"",srcObject:e.peers[t].stream}})])}))],2)],1),e._v(" "),r("b-container",{staticClass:"captions",attrs:{fluid:""}},[e._v(e._s(e.captions))]),e._v(" "),e.localStream?r("b-container",{staticClass:"media-buttons",attrs:{fluid:""}},[r("b-button",{attrs:{variant:"primary"},on:{click:e.toggleMic}},[e._v(e._s(e.micOn?"Mute Mic":"Unmute Mic"))]),e._v(" "),r("b-button",{attrs:{variant:"primary"},on:{click:e.toggleVideo}},[e._v(e._s(e.videoOn?"Disable Camera":"Enable Camera"))]),e._v(" "),r("b-button",{attrs:{variant:"danger"},on:{click:e.exitRoom}},[e._v("Leave Meeting")])],1):e._e()],1)],1)}),[],!1,null,"20fed338",null);t.default=component.exports}}]);